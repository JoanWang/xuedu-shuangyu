<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: FinanceController</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">FinanceController</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/finance_controller_rb.html">
                app/controllers/finance_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">



   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000580">add_particulars</a>&nbsp;&nbsp;
      <a href="#M000582">add_particulars_create</a>&nbsp;&nbsp;
      <a href="#M000588">add_particulars_delete</a>&nbsp;&nbsp;
      <a href="#M000586">add_particulars_edit</a>&nbsp;&nbsp;
      <a href="#M000581">add_particulars_new</a>&nbsp;&nbsp;
      <a href="#M000587">add_particulars_update</a>&nbsp;&nbsp;
      <a href="#M000576">additional_fees_create</a>&nbsp;&nbsp;
      <a href="#M000575">additional_fees_create_form</a>&nbsp;&nbsp;
      <a href="#M000579">additional_fees_delete</a>&nbsp;&nbsp;
      <a href="#M000577">additional_fees_edit</a>&nbsp;&nbsp;
      <a href="#M000584">additional_fees_list</a>&nbsp;&nbsp;
      <a href="#M000578">additional_fees_update</a>&nbsp;&nbsp;
      <a href="#M000585">additional_particulars</a>&nbsp;&nbsp;
      <a href="#M000543">approve_monthly_payslip</a>&nbsp;&nbsp;
      <a href="#M000517">automatic_transactions</a>&nbsp;&nbsp;
      <a href="#M000541">batch_fees_report</a>&nbsp;&nbsp;
      <a href="#M000527">categories</a>&nbsp;&nbsp;
      <a href="#M000529">category_create</a>&nbsp;&nbsp;
      <a href="#M000530">category_delete</a>&nbsp;&nbsp;
      <a href="#M000531">category_edit</a>&nbsp;&nbsp;
      <a href="#M000528">category_new</a>&nbsp;&nbsp;
      <a href="#M000532">category_update</a>&nbsp;&nbsp;
      <a href="#M000618">compare_report</a>&nbsp;&nbsp;
      <a href="#M000557">create_asset</a>&nbsp;&nbsp;
      <a href="#M000551">create_liability</a>&nbsp;&nbsp;
      <a href="#M000561">delete_asset</a>&nbsp;&nbsp;
      <a href="#M000555">delete_liability</a>&nbsp;&nbsp;
      <a href="#M000518">donation</a>&nbsp;&nbsp;
      <a href="#M000519">donation_receipt</a>&nbsp;&nbsp;
      <a href="#M000520">donation_receipt_pdf</a>&nbsp;&nbsp;
      <a href="#M000539">donations_report</a>&nbsp;&nbsp;
      <a href="#M000521">donors</a>&nbsp;&nbsp;
      <a href="#M000562">each_asset_view</a>&nbsp;&nbsp;
      <a href="#M000556">each_liability_view</a>&nbsp;&nbsp;
      <a href="#M000559">edit_asset</a>&nbsp;&nbsp;
      <a href="#M000552">edit_liability</a>&nbsp;&nbsp;
      <a href="#M000546">employee_payslip_approve</a>&nbsp;&nbsp;
      <a href="#M000538">employee_payslip_monthly_report</a>&nbsp;&nbsp;
      <a href="#M000522">expense_create</a>&nbsp;&nbsp;
      <a href="#M000523">expense_edit</a>&nbsp;&nbsp;
      <a href="#M000589">fee_collection_batch_update</a>&nbsp;&nbsp;
      <a href="#M000591">fee_collection_create</a>&nbsp;&nbsp;
      <a href="#M000593">fee_collection_dates_batch</a>&nbsp;&nbsp;
      <a href="#M000596">fee_collection_delete</a>&nbsp;&nbsp;
      <a href="#M000594">fee_collection_edit</a>&nbsp;&nbsp;
      <a href="#M000590">fee_collection_new</a>&nbsp;&nbsp;
      <a href="#M000595">fee_collection_update</a>&nbsp;&nbsp;
      <a href="#M000592">fee_collection_view</a>&nbsp;&nbsp;
      <a href="#M000615">fee_defaulters_pdf</a>&nbsp;&nbsp;
      <a href="#M000612">fees_defaulters</a>&nbsp;&nbsp;
      <a href="#M000614">fees_defaulters_students</a>&nbsp;&nbsp;
      <a href="#M000574">fees_particulars_create</a>&nbsp;&nbsp;
      <a href="#M000573">fees_particulars_new</a>&nbsp;&nbsp;
      <a href="#M000540">fees_report</a>&nbsp;&nbsp;
      <a href="#M000609">fees_structure_dates</a>&nbsp;&nbsp;
      <a href="#M000610">fees_structure_for_student</a>&nbsp;&nbsp;
      <a href="#M000604">fees_student_dates</a>&nbsp;&nbsp;
      <a href="#M000608">fees_student_structure_search_logic</a>&nbsp;&nbsp;
      <a href="#M000597">fees_submission_batch</a>&nbsp;&nbsp;
      <a href="#M000607">fees_submission_save</a>&nbsp;&nbsp;
      <a href="#M000605">fees_submission_student</a>&nbsp;&nbsp;
      <a href="#M000623">graph_for_compare_monthly_report</a>&nbsp;&nbsp;
      <a href="#M000624">graph_for_transaction_comparison</a>&nbsp;&nbsp;
      <a href="#M000622">graph_for_update_monthly_report</a>&nbsp;&nbsp;
      <a href="#M000524">income_create</a>&nbsp;&nbsp;
      <a href="#M000526">income_edit</a>&nbsp;&nbsp;
      <a href="#M000516">index</a>&nbsp;&nbsp;
      <a href="#M000599">load_fees_submission_batch</a>&nbsp;&nbsp;
      <a href="#M000565">master_category_create</a>&nbsp;&nbsp;
      <a href="#M000572">master_category_delete</a>&nbsp;&nbsp;
      <a href="#M000566">master_category_edit</a>&nbsp;&nbsp;
      <a href="#M000564">master_category_new</a>&nbsp;&nbsp;
      <a href="#M000568">master_category_particulars</a>&nbsp;&nbsp;
      <a href="#M000571">master_category_particulars_delete</a>&nbsp;&nbsp;
      <a href="#M000569">master_category_particulars_edit</a>&nbsp;&nbsp;
      <a href="#M000570">master_category_particulars_update</a>&nbsp;&nbsp;
      <a href="#M000567">master_category_update</a>&nbsp;&nbsp;
      <a href="#M000563">master_fees</a>&nbsp;&nbsp;
      <a href="#M000620">month_date</a>&nbsp;&nbsp;
      <a href="#M000525">monthly_income</a>&nbsp;&nbsp;
      <a href="#M000544">one_click_approve</a>&nbsp;&nbsp;
      <a href="#M000545">one_click_approve_submit</a>&nbsp;&nbsp;
      <a href="#M000616">pay_fees_defaulters</a>&nbsp;&nbsp;
      <a href="#M000621">pdf_fee_structure</a>&nbsp;&nbsp;
      <a href="#M000619">report_compare</a>&nbsp;&nbsp;
      <a href="#M000536">salary_department</a>&nbsp;&nbsp;
      <a href="#M000537">salary_employee</a>&nbsp;&nbsp;
      <a href="#M000550">search_ajax</a>&nbsp;&nbsp;
      <a href="#M000603">search_logic</a>&nbsp;&nbsp;
      <a href="#M000601">student_fee_receipt_pdf</a>&nbsp;&nbsp;
      <a href="#M000542">student_fees_structure</a>&nbsp;&nbsp;
      <a href="#M000611">student_fees_structure</a>&nbsp;&nbsp;
      <a href="#M000583">student_or_student_category</a>&nbsp;&nbsp;
      <a href="#M000535">transaction_pdf</a>&nbsp;&nbsp;
      <a href="#M000533">transaction_trigger_create</a>&nbsp;&nbsp;
      <a href="#M000600">update_ajax</a>&nbsp;&nbsp;
      <a href="#M000560">update_asset</a>&nbsp;&nbsp;
      <a href="#M000617">update_defaulters_fine_ajax</a>&nbsp;&nbsp;
      <a href="#M000598">update_fees_collection_dates</a>&nbsp;&nbsp;
      <a href="#M000613">update_fees_collection_dates_defaulters</a>&nbsp;&nbsp;
      <a href="#M000602">update_fine_ajax</a>&nbsp;&nbsp;
      <a href="#M000553">update_liability</a>&nbsp;&nbsp;
      <a href="#M000549">update_monthly_payslip</a>&nbsp;&nbsp;
      <a href="#M000534">update_monthly_report</a>&nbsp;&nbsp;
      <a href="#M000606">update_student_fine_ajax</a>&nbsp;&nbsp;
      <a href="#M000558">view_asset</a>&nbsp;&nbsp;
      <a href="#M000554">view_liability</a>&nbsp;&nbsp;
      <a href="#M000547">view_monthly_payslip</a>&nbsp;&nbsp;
      <a href="#M000548">view_monthly_payslip_search</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000580" class="method-detail">
        <a name="M000580"></a>

        <div class="method-heading">
          <a href="#M000580" class="method-signature">
          <span class="method-name">add_particulars</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000580-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000580-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 644</span>
644:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars</span>
645:     <span class="ruby-ivar">@collection_date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
646:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">fee_category_id</span>)
647:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
648:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>
649:     <span class="ruby-ivar">@finance_fee_particulars_list</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@additional_category.id}'&quot;</span>])
650:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000582" class="method-detail">
        <a name="M000582"></a>

        <div class="method-heading">
          <a href="#M000582" class="method-signature">
          <span class="method-name">add_particulars_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000582-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000582-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 659</span>
659:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars_create</span>
660:     <span class="ruby-ivar">@collection_date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
661:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">fee_category_id</span>)
662: 
663:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_particulars</span>])
664:     <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">finance_fee_category_id</span> = <span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">id</span>
665:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">save</span>
666:       <span class="ruby-ivar">@error</span> = <span class="ruby-keyword kw">true</span>
667:     <span class="ruby-keyword kw">else</span>
668:       <span class="ruby-ivar">@finance_fee_particulars_list</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@additional_category.id}'&quot;</span>])
669:     <span class="ruby-keyword kw">end</span>
670:     
671:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000588" class="method-detail">
        <a name="M000588"></a>

        <div class="method-heading">
          <a href="#M000588" class="method-signature">
          <span class="method-name">add_particulars_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000588-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000588-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 715</span>
715:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars_delete</span>
716:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
717:     <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
718:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">finance_fee_category_id</span>)
719:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@additional_category.id}' &quot;</span>])
720: 
721:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
722:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'additional_particulars'</span>}
723:     <span class="ruby-keyword kw">end</span>
724:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000586" class="method-detail">
        <a name="M000586"></a>

        <div class="method-heading">
          <a href="#M000586" class="method-signature">
          <span class="method-name">add_particulars_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000586-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000586-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 704</span>
704:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars_edit</span>
705:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
706:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000581" class="method-detail">
        <a name="M000581"></a>

        <div class="method-heading">
          <a href="#M000581" class="method-signature">
          <span class="method-name">add_particulars_new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000581-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000581-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 652</span>
652:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars_new</span>
653:     <span class="ruby-ivar">@collection_date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
654:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">fee_category_id</span>)
655:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
656:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>
657:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000587" class="method-detail">
        <a name="M000587"></a>

        <div class="method-heading">
          <a href="#M000587" class="method-signature">
          <span class="method-name">add_particulars_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000587-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000587-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 708</span>
708:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_particulars_update</span>
709:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
710:     <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_particulars</span>])
711:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span> <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">finance_fee_category_id</span>
712:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@finance_fee_particulars.finance_fee_category_id}' &quot;</span>])
713:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000576" class="method-detail">
        <a name="M000576"></a>

        <div class="method-heading">
          <a href="#M000576" class="method-signature">
          <span class="method-name">additional_fees_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000576-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000576-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 567</span>
567:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_create</span>
568: 
569:     <span class="ruby-identifier">batch</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:batch_id</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:batch_id</span>].<span class="ruby-identifier">nil?</span>
570:     <span class="ruby-comment cmt"># batch ||=[]</span>
571:     <span class="ruby-ivar">@batches</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
572:     <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">current_user</span>
573:     <span class="ruby-ivar">@students</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find_all_by_batch_id</span>(<span class="ruby-identifier">batch</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">batch</span>.<span class="ruby-identifier">nil?</span>
574:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">new</span>(
575:       <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:name</span>],
576:       <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:description</span>],
577:       <span class="ruby-identifier">:batch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:batch_id</span>]
578:     )
579:     
580:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">save</span>
581:       <span class="ruby-ivar">@collection_date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">create</span>(
582:         <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">name</span>,
583:         <span class="ruby-identifier">:start_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:start_date</span>],
584:         <span class="ruby-identifier">:end_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:end_date</span>],
585:         <span class="ruby-identifier">:due_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:due_date</span>],
586:         <span class="ruby-identifier">:batch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:additional_fees</span>][<span class="ruby-identifier">:batch_id</span>],
587:         <span class="ruby-identifier">:fee_category_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">id</span>
588:       )
589:       <span class="ruby-identifier">body</span> = <span class="ruby-value str">&quot;&lt;p&gt;Fee submission date for &quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot; has been published &lt;br /&gt;
590:                                Fees submitting date starts on&lt;br /&gt;
591:                                Start date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br /&gt;&quot;</span><span class="ruby-operator">+</span>
592:         <span class="ruby-value str">&quot;End date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">end_date</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br /&quot;</span><span class="ruby-operator">+</span>
593:         <span class="ruby-value str">&quot;Due date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">due_date</span>.<span class="ruby-identifier">to_s</span>
594:       <span class="ruby-identifier">subject</span> = <span class="ruby-value str">&quot;Fees submission date&quot;</span>
595:       <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">due_date</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y-%b-%d&quot;</span>) <span class="ruby-operator">+</span>  <span class="ruby-value str">&quot; 00:00:00&quot;</span>
596:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">batch</span>.<span class="ruby-identifier">empty?</span>
597:         <span class="ruby-ivar">@students</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
598:           <span class="ruby-constant">FinanceFee</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:student_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span>,<span class="ruby-identifier">:fee_collection_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">id</span>)
599:           <span class="ruby-constant">Reminder</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:subject=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subject</span>,
600:             <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">body</span>, <span class="ruby-identifier">:is_read=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:is_deleted_by_sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">:is_deleted_by_recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>)
601:         <span class="ruby-keyword kw">end</span>
602:         <span class="ruby-constant">Event</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:title=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fees Due&quot;</span>, <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span><span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:start_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@due_date</span>, <span class="ruby-identifier">:end_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@due_date</span>, <span class="ruby-identifier">:is_due</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
603:       <span class="ruby-keyword kw">else</span>
604:         <span class="ruby-ivar">@batches</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span>
605:           <span class="ruby-ivar">@students</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find_all_by_batch_id</span>(<span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>)
606:           <span class="ruby-ivar">@students</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
607:             <span class="ruby-constant">FinanceFee</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:student_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span>,<span class="ruby-identifier">:fee_collection_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">id</span>)
608:             <span class="ruby-constant">Reminder</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">s</span>.<span class="ruby-identifier">student_user</span>, <span class="ruby-identifier">:subject=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subject</span>,
609:               <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">body</span>, <span class="ruby-identifier">:is_read=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:is_deleted_by_sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">:is_deleted_by_recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>)
610:            <span class="ruby-keyword kw">end</span>
611:         <span class="ruby-keyword kw">end</span>
612:         <span class="ruby-constant">Event</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:title=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fees Due&quot;</span>, <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span><span class="ruby-ivar">@additional_category</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:start_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@due_date</span>, <span class="ruby-identifier">:end_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@due_date</span>, <span class="ruby-identifier">:is_due</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
613:       <span class="ruby-keyword kw">end</span>
614:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Category created, please add Particulars for the category&quot;</span>
615:       <span class="ruby-identifier">redirect_to</span>(<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;add_particulars&quot;</span> ,<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@collection_date</span>.<span class="ruby-identifier">id</span>)
616:     <span class="ruby-keyword kw">else</span>
617:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Fields with * cannot be empty'</span>
618:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;additional_fees_create_form&quot;</span>
619:     <span class="ruby-keyword kw">end</span>
620:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000575" class="method-detail">
        <a name="M000575"></a>

        <div class="method-heading">
          <a href="#M000575" class="method-signature">
          <span class="method-name">additional_fees_create_form</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000575-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000575-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 562</span>
562:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_create_form</span>
563:     <span class="ruby-ivar">@batches</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
564:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span> ,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}'&quot;</span>])
565:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000579" class="method-detail">
        <a name="M000579"></a>

        <div class="method-heading">
          <a href="#M000579" class="method-signature">
          <span class="method-name">additional_fees_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000579-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000579-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 635</span>
635:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_delete</span>
636:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
637:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
638:     <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find_by_fee_category_id</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
639:     <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
640:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">delete_particulars</span>
641:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;additional_fees_list&quot;</span>
642:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000577" class="method-detail">
        <a name="M000577"></a>

        <div class="method-heading">
          <a href="#M000577" class="method-signature">
          <span class="method-name">additional_fees_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000577-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000577-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 622</span>
622:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_edit</span>
623:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
624:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
625:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'additional_fees_edit'</span> }
626:     <span class="ruby-keyword kw">end</span>
627:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000584" class="method-detail">
        <a name="M000584"></a>

        <div class="method-heading">
          <a href="#M000584" class="method-signature">
          <span class="method-name">additional_fees_list</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000584-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000584-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 689</span>
689:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_list</span>
690:     
691:     <span class="ruby-ivar">@additional_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = '#{false}'&quot;</span>])
692:      
693: 
694:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000578" class="method-detail">
        <a name="M000578"></a>

        <div class="method-heading">
          <a href="#M000578" class="method-signature">
          <span class="method-name">additional_fees_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000578-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000578-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 629</span>
629:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_fees_update</span>
630:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
631:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_category</span>])
632:     <span class="ruby-ivar">@additional_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = '#{false}'&quot;</span>])
633:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000585" class="method-detail">
        <a name="M000585"></a>

        <div class="method-heading">
          <a href="#M000585" class="method-signature">
          <span class="method-name">additional_particulars</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000585-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000585-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 696</span>
696:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">additional_particulars</span>
697:     <span class="ruby-ivar">@additional_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
698:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@additional_category.id}' &quot;</span>])
699:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
700:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'additional_particulars'</span>}
701:     <span class="ruby-keyword kw">end</span>
702:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000543" class="method-detail">
        <a name="M000543"></a>

        <div class="method-heading">
          <a href="#M000543" class="method-signature">
          <span class="method-name">approve_monthly_payslip</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
approve montly payslip &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000543-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000543-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 262</span>
262:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">approve_monthly_payslip</span>
263:     <span class="ruby-ivar">@salary_dates</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;distinct salary_date&quot;</span>)
264:     
265:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000517" class="method-detail">
        <a name="M000517"></a>

        <div class="method-heading">
          <a href="#M000517" class="method-signature">
          <span class="method-name">automatic_transactions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000517-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000517-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">automatic_transactions</span>
11:     <span class="ruby-ivar">@triggers</span> = <span class="ruby-constant">FinanceTransactionTrigger</span>.<span class="ruby-identifier">all</span>
12:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span> ,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id != 1 and id != 3 &quot;</span>])
13:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000541" class="method-detail">
        <a name="M000541"></a>

        <div class="method-heading">
          <a href="#M000541" class="method-signature">
          <span class="method-name">batch_fees_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000541-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000541-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 244</span>
244:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">batch_fees_report</span>
245:     <span class="ruby-identifier">month_date</span>
246:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
247:     <span class="ruby-ivar">@batch</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">batch</span>.<span class="ruby-identifier">id</span>)
248:     <span class="ruby-ivar">@sids</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">students</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
249:     <span class="ruby-ivar">@fees</span> = <span class="ruby-constant">FinanceFee</span>.<span class="ruby-identifier">find_all_by_fee_collection_id</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">id</span>)
250:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000527" class="method-detail">
        <a name="M000527"></a>

        <div class="method-heading">
          <a href="#M000527" class="method-signature">
          <span class="method-name">categories</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000527-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000527-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">categories</span>
84:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
85:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000529" class="method-detail">
        <a name="M000529"></a>

        <div class="method-heading">
          <a href="#M000529" class="method-signature">
          <span class="method-name">category_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000529-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000529-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 91</span>
91:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">category_create</span>
92:     <span class="ruby-ivar">@finance_category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_category</span>])
93:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
94:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000530" class="method-detail">
        <a name="M000530"></a>

        <div class="method-heading">
          <a href="#M000530" class="method-signature">
          <span class="method-name">category_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000530-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000530-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 96</span>
 96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">category_delete</span>
 97:     <span class="ruby-ivar">@finance_category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
 98:     <span class="ruby-ivar">@finance_category</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
 99:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
100:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000531" class="method-detail">
        <a name="M000531"></a>

        <div class="method-heading">
          <a href="#M000531" class="method-signature">
          <span class="method-name">category_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000531-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000531-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">category_edit</span>
103:     <span class="ruby-ivar">@finance_category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
104:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>
105:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000528" class="method-detail">
        <a name="M000528"></a>

        <div class="method-heading">
          <a href="#M000528" class="method-signature">
          <span class="method-name">category_new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000528-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000528-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">category_new</span>
88:     <span class="ruby-ivar">@finance_transaction_category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">new</span>
89:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000532" class="method-detail">
        <a name="M000532"></a>

        <div class="method-heading">
          <a href="#M000532" class="method-signature">
          <span class="method-name">category_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000532-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000532-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">category_update</span>
108:     <span class="ruby-ivar">@finance_category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
109:     <span class="ruby-ivar">@finance_category</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_category</span>])
110:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>
111:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000618" class="method-detail">
        <a name="M000618"></a>

        <div class="method-heading">
          <a href="#M000618" class="method-signature">
          <span class="method-name">compare_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000618-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000618-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1130</span>
1130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_report</span>
1131:     
1132:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000557" class="method-detail">
        <a name="M000557"></a>

        <div class="method-heading">
          <a href="#M000557" class="method-signature">
          <span class="method-name">create_asset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000557-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000557-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 424</span>
424:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_asset</span>
425:     <span class="ruby-ivar">@asset</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:asset</span>])
426:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000551" class="method-detail">
        <a name="M000551"></a>

        <div class="method-heading">
          <a href="#M000551" class="method-signature">
          <span class="method-name">create_liability</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
asset-liability&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000551-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000551-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 389</span>
389:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_liability</span>
390:     <span class="ruby-ivar">@liability</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:liability</span>])
391:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000561" class="method-detail">
        <a name="M000561"></a>

        <div class="method-heading">
          <a href="#M000561" class="method-signature">
          <span class="method-name">delete_asset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000561-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000561-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 445</span>
445:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_asset</span>
446:     <span class="ruby-ivar">@asset</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
447:     <span class="ruby-ivar">@asset</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
448:     <span class="ruby-ivar">@assets</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
449:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
450:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;asset_list&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;asset_list&quot;</span>
451:     <span class="ruby-keyword kw">end</span>
452:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000555" class="method-detail">
        <a name="M000555"></a>

        <div class="method-heading">
          <a href="#M000555" class="method-signature">
          <span class="method-name">delete_liability</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000555-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000555-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 410</span>
410:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_liability</span>
411:     <span class="ruby-ivar">@liability</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
412:     <span class="ruby-ivar">@liability</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
413:     <span class="ruby-ivar">@liabilities</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span> ,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
414:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
415:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;liability_list&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;liability_list&quot;</span>
416:     <span class="ruby-keyword kw">end</span>
417:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000518" class="method-detail">
        <a name="M000518"></a>

        <div class="method-heading">
          <a href="#M000518" class="method-signature">
          <span class="method-name">donation</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000518-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000518-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">donation</span>
16:     <span class="ruby-ivar">@donation</span> = <span class="ruby-constant">FinanceDonation</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:donation</span>])
17:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@donation</span>.<span class="ruby-identifier">save</span>
18:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Donation accepted.'</span>
19:       <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'donation_receipt'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@donation</span>.<span class="ruby-identifier">id</span>
20:     <span class="ruby-keyword kw">end</span>
21:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000519" class="method-detail">
        <a name="M000519"></a>

        <div class="method-heading">
          <a href="#M000519" class="method-signature">
          <span class="method-name">donation_receipt</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000519-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000519-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">donation_receipt</span>
24:     <span class="ruby-ivar">@donation</span> = <span class="ruby-constant">FinanceDonation</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
25:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000520" class="method-detail">
        <a name="M000520"></a>

        <div class="method-heading">
          <a href="#M000520" class="method-signature">
          <span class="method-name">donation_receipt_pdf</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000520-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000520-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">donation_receipt_pdf</span>
28:     <span class="ruby-ivar">@donation</span> = <span class="ruby-constant">FinanceDonation</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
29:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
30:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
31:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">pdf</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }
32:     <span class="ruby-keyword kw">end</span>
33:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000539" class="method-detail">
        <a name="M000539"></a>

        <div class="method-heading">
          <a href="#M000539" class="method-signature">
          <span class="method-name">donations_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000539-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000539-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 232</span>
232:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">donations_report</span>
233:     <span class="ruby-identifier">month_date</span>
234:     <span class="ruby-ivar">@donations</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@end_date}'and category_id ='#{2}'&quot;</span>])
235:     <span class="ruby-ivar">@trigger</span> = <span class="ruby-constant">FinanceTransactionTrigger</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
236:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000521" class="method-detail">
        <a name="M000521"></a>

        <div class="method-heading">
          <a href="#M000521" class="method-signature">
          <span class="method-name">donors</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000521-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000521-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 35</span>
35:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">donors</span>
36:     <span class="ruby-ivar">@donations</span> = <span class="ruby-constant">FinanceDonation</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>)
37:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000562" class="method-detail">
        <a name="M000562"></a>

        <div class="method-heading">
          <a href="#M000562" class="method-signature">
          <span class="method-name">each_asset_view</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000562-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000562-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 454</span>
454:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_asset_view</span>
455:     <span class="ruby-ivar">@asset</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
456:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
457:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000556" class="method-detail">
        <a name="M000556"></a>

        <div class="method-heading">
          <a href="#M000556" class="method-signature">
          <span class="method-name">each_liability_view</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000556-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000556-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 419</span>
419:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_liability_view</span>
420:     <span class="ruby-ivar">@liability</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
421:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
422:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000559" class="method-detail">
        <a name="M000559"></a>

        <div class="method-heading">
          <a href="#M000559" class="method-signature">
          <span class="method-name">edit_asset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000559-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000559-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 432</span>
432:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">edit_asset</span>
433:     <span class="ruby-ivar">@asset</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
434:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000552" class="method-detail">
        <a name="M000552"></a>

        <div class="method-heading">
          <a href="#M000552" class="method-signature">
          <span class="method-name">edit_liability</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000552-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000552-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 393</span>
393:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">edit_liability</span>
394:     <span class="ruby-ivar">@liability</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
395:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000546" class="method-detail">
        <a name="M000546"></a>

        <div class="method-heading">
          <a href="#M000546" class="method-signature">
          <span class="method-name">employee_payslip_approve</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000546-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000546-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 286</span>
286:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">employee_payslip_approve</span>
287:     <span class="ruby-identifier">dates</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_salary_date_and_employee_id</span>(<span class="ruby-constant">Date</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>]),<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
288: 
289:     <span class="ruby-identifier">dates</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
290:       <span class="ruby-identifier">d</span>.<span class="ruby-identifier">approve</span>(<span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>)
291:     <span class="ruby-keyword kw">end</span>
292:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Payslip has been approved'</span>
293:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>
294:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000538" class="method-detail">
        <a name="M000538"></a>

        <div class="method-heading">
          <a href="#M000538" class="method-signature">
          <span class="method-name">employee_payslip_monthly_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000538-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000538-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 176</span>
176:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">employee_payslip_monthly_report</span>
177:     
178:     <span class="ruby-ivar">@salary_date</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>]
179:     <span class="ruby-ivar">@employee</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
180:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
181:     
182:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
183:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
184:         <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;payslip_view&quot;</span>, <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>
185:       <span class="ruby-keyword kw">end</span>
186:       <span class="ruby-keyword kw">return</span>
187:     <span class="ruby-keyword kw">end</span>
188:     <span class="ruby-ivar">@monthly_payslips</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-ivar">@salary_date</span>,
189:       <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;employee_id =#{params[:id]}&quot;</span>,
190:       <span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;payroll_category_id ASC&quot;</span>)
191: 
192:     <span class="ruby-ivar">@individual_payslip_category</span> = <span class="ruby-constant">IndividualPayslipCategory</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-ivar">@salary_date</span>,
193:       <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;employee_id =#{params[:id]}&quot;</span>,
194:       <span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id ASC&quot;</span>)
195:     <span class="ruby-ivar">@individual_category_non_deductionable</span> = <span class="ruby-value">0</span>
196:     <span class="ruby-ivar">@individual_category_deductionable</span> = <span class="ruby-value">0</span>
197:     <span class="ruby-ivar">@individual_payslip_category</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
198:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
199:         <span class="ruby-ivar">@individual_category_non_deductionable</span> = <span class="ruby-ivar">@individual_category_non_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
200:       <span class="ruby-keyword kw">end</span>
201:     <span class="ruby-keyword kw">end</span>
202: 
203:     <span class="ruby-ivar">@individual_payslip_category</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
204:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
205:         <span class="ruby-ivar">@individual_category_deductionable</span> = <span class="ruby-ivar">@individual_category_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
206:       <span class="ruby-keyword kw">end</span>
207:     <span class="ruby-keyword kw">end</span>
208: 
209:     <span class="ruby-ivar">@non_deductionable_amount</span> = <span class="ruby-value">0</span>
210:     <span class="ruby-ivar">@deductionable_amount</span> = <span class="ruby-value">0</span>
211:     <span class="ruby-ivar">@monthly_payslips</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mp</span><span class="ruby-operator">|</span>
212:       <span class="ruby-identifier">category1</span> = <span class="ruby-constant">PayrollCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">mp</span>.<span class="ruby-identifier">payroll_category_id</span>)
213:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">category1</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
214:         <span class="ruby-ivar">@non_deductionable_amount</span> = <span class="ruby-ivar">@non_deductionable_amount</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mp</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
215:       <span class="ruby-keyword kw">end</span>
216:     <span class="ruby-keyword kw">end</span>
217: 
218:     <span class="ruby-ivar">@monthly_payslips</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mp</span><span class="ruby-operator">|</span>
219:       <span class="ruby-identifier">category2</span> = <span class="ruby-constant">PayrollCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">mp</span>.<span class="ruby-identifier">payroll_category_id</span>)
220:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">category2</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
221:         <span class="ruby-ivar">@deductionable_amount</span> = <span class="ruby-ivar">@deductionable_amount</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mp</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
222:       <span class="ruby-keyword kw">end</span>
223:     <span class="ruby-keyword kw">end</span>
224: 
225:     <span class="ruby-ivar">@net_non_deductionable_amount</span> = <span class="ruby-ivar">@individual_category_non_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@non_deductionable_amount</span>
226:     <span class="ruby-ivar">@net_deductionable_amount</span> = <span class="ruby-ivar">@individual_category_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@deductionable_amount</span>
227: 
228:     <span class="ruby-ivar">@net_amount</span> = <span class="ruby-ivar">@net_non_deductionable_amount</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@net_deductionable_amount</span>
229:    
230:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000522" class="method-detail">
        <a name="M000522"></a>

        <div class="method-heading">
          <a href="#M000522" class="method-signature">
          <span class="method-name">expense_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000522-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000522-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expense_create</span>
40:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-keyword kw">nil</span>
41:     <span class="ruby-ivar">@expense</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:transaction</span>])
42:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">expense_categories</span>
43:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@categories</span>.<span class="ruby-identifier">empty?</span>
44:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Please create category for expense!&quot;</span>
45:     <span class="ruby-keyword kw">end</span>
46:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@expense</span>.<span class="ruby-identifier">save</span>
47:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Expense has been added to the accounts.&quot;</span>
48:     <span class="ruby-keyword kw">end</span>
49:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000523" class="method-detail">
        <a name="M000523"></a>

        <div class="method-heading">
          <a href="#M000523" class="method-signature">
          <span class="method-name">expense_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000523-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000523-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 51</span>
51:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">expense_edit</span>
52:     <span class="ruby-ivar">@transaction</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
53:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:is_income</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>} )
54:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@transaction</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:transaction</span>])
55:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;The entry has been edited.&quot;</span>
56:     <span class="ruby-keyword kw">end</span>
57:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000589" class="method-detail">
        <a name="M000589"></a>

        <div class="method-heading">
          <a href="#M000589" class="method-signature">
          <span class="method-name">fee_collection_batch_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000589-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000589-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 726</span>
726:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_batch_update</span>
727:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
728:     <span class="ruby-ivar">@batch_ids</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">batch</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
729:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@batch_ids</span>.<span class="ruby-identifier">nil?</span>
730:       <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find_all_by_id</span> <span class="ruby-ivar">@batch_ids</span>
731:     <span class="ruby-keyword kw">else</span>
732:       <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
733:     <span class="ruby-keyword kw">end</span>
734:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
735:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;batchs&quot;</span> ,<span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fee_collection_batchs&quot;</span>
736:     <span class="ruby-keyword kw">end</span>
737:     
738:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000591" class="method-detail">
        <a name="M000591"></a>

        <div class="method-heading">
          <a href="#M000591" class="method-signature">
          <span class="method-name">fee_collection_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000591-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000591-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 745</span>
745:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_create</span>
746:     <span class="ruby-ivar">@user</span> = <span class="ruby-identifier">current_user</span>
747:     <span class="ruby-identifier">fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_collection</span>][<span class="ruby-identifier">:fee_category_id</span>])
748:     <span class="ruby-identifier">batchs</span> =[]
749:     <span class="ruby-identifier">batchs</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fee_collection</span>][<span class="ruby-identifier">:batch_ids</span>]
750:     <span class="ruby-identifier">subject</span> = <span class="ruby-value str">&quot;Fees submission date&quot;</span>
751:        
752:     <span class="ruby-identifier">batchs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span>
753:       <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">new</span>(
754:         <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_collection</span>][<span class="ruby-identifier">:name</span>],
755:         <span class="ruby-identifier">:start_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_collection</span>][<span class="ruby-identifier">:start_date</span>],
756:         <span class="ruby-identifier">:end_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_collection</span>][<span class="ruby-identifier">:end_date</span>],
757:         <span class="ruby-identifier">:due_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_collection</span>][<span class="ruby-identifier">:due_date</span>],
758:         <span class="ruby-identifier">:fee_category_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">fee_category</span>.<span class="ruby-identifier">id</span>,
759:         <span class="ruby-identifier">:batch_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>
760:       )
761:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">save</span>
762:         <span class="ruby-ivar">@students</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find_all_by_batch_id</span>(<span class="ruby-identifier">b</span>)
763:         <span class="ruby-ivar">@students</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
764:           <span class="ruby-identifier">body</span> = <span class="ruby-value str">&quot;&lt;p&gt;&lt;b&gt;Fee submission date for&lt;i&gt;&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">fee_category</span>.<span class="ruby-identifier">name</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;/i&gt;has been published&lt;/b&gt;&lt;br /&gt;&lt;br/&gt;
765:                                 Start date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">start_date</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br /&gt;&quot;</span><span class="ruby-operator">+</span>
766:             <span class="ruby-value str">&quot;End date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">end_date</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br /&gt;&quot;</span><span class="ruby-operator">+</span>
767:             <span class="ruby-value str">&quot;Dude date :&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">due_date</span>.<span class="ruby-identifier">to_s</span><span class="ruby-operator">+</span><span class="ruby-value str">&quot;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&quot;</span><span class="ruby-operator">+</span>
768:             <span class="ruby-node">&quot;check your  &lt;a href='../../finance/student_fees_structure/#{s.id}/#{@finance_fee_collection.id}'&gt;Fee structure&lt;/a&gt; &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
769:                                regards,&lt;br/&gt;&quot;</span><span class="ruby-operator">+</span><span class="ruby-ivar">@user</span>.<span class="ruby-identifier">full_name</span>.<span class="ruby-identifier">capitalize</span>
770: 
771:           <span class="ruby-constant">FinanceFee</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:student_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">id</span>,<span class="ruby-identifier">:fee_collection_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">id</span>)
772:           <span class="ruby-constant">Reminder</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@user</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">s</span>.<span class="ruby-identifier">student_user</span>, <span class="ruby-identifier">:subject=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">subject</span>,
773:             <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">body</span>, <span class="ruby-identifier">:is_read=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:is_deleted_by_sender=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>,<span class="ruby-identifier">:is_deleted_by_recipient=</span><span class="ruby-operator">&gt;</span><span class="ruby-keyword kw">false</span>)
774:        <span class="ruby-keyword kw">end</span>
775:           <span class="ruby-constant">Event</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:title=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fees Due&quot;</span>, <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span><span class="ruby-identifier">fee_category</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:start_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">due_date</span>, <span class="ruby-identifier">:end_date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">due_date</span>, <span class="ruby-identifier">:is_due</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
776:         
777:       <span class="ruby-keyword kw">else</span>
778:         <span class="ruby-ivar">@error</span> = <span class="ruby-keyword kw">true</span>
779:       <span class="ruby-keyword kw">end</span>
780:     <span class="ruby-keyword kw">end</span>
781:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000593" class="method-detail">
        <a name="M000593"></a>

        <div class="method-heading">
          <a href="#M000593" class="method-signature">
          <span class="method-name">fee_collection_dates_batch</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000593-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000593-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 788</span>
788:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_dates_batch</span>
789:     <span class="ruby-ivar">@batch</span>= <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
790:     <span class="ruby-ivar">@finance_fee_collections</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">fee_collection_dates</span>
791:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
792:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">'fee_collection_dates'</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'fee_collection_dates_batch'</span>
793:     <span class="ruby-keyword kw">end</span>
794:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000596" class="method-detail">
        <a name="M000596"></a>

        <div class="method-heading">
          <a href="#M000596" class="method-signature">
          <span class="method-name">fee_collection_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000596-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000596-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 806</span>
806:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_delete</span>
807:     <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]
808:     <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
809:     <span class="ruby-ivar">@finance_fee_collections</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and batch_id = '#{@finance_fee_collection.batch_id}'&quot;</span>])
810:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000594" class="method-detail">
        <a name="M000594"></a>

        <div class="method-heading">
          <a href="#M000594" class="method-signature">
          <span class="method-name">fee_collection_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000594-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000594-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 796</span>
796:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_edit</span>
797:     <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]
798:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000590" class="method-detail">
        <a name="M000590"></a>

        <div class="method-heading">
          <a href="#M000590" class="method-signature">
          <span class="method-name">fee_collection_new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000590-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000590-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 740</span>
740:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_new</span>
741:     <span class="ruby-ivar">@fee_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span> , <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_master = '#{1}' and is_deleted = '#{false}'&quot;</span>])
742:     <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">new</span>
743:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000595" class="method-detail">
        <a name="M000595"></a>

        <div class="method-heading">
          <a href="#M000595" class="method-signature">
          <span class="method-name">fee_collection_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000595-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000595-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 800</span>
800:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_update</span>
801:     <span class="ruby-ivar">@finance_fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>]
802:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-value str">&quot;Fee Collection updated successfully&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@finance_fee_collection</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fee_collection</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>
803:     <span class="ruby-ivar">@finance_fee_collections</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and batch_id = '#{@finance_fee_collection.batch_id}'&quot;</span>])
804:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000592" class="method-detail">
        <a name="M000592"></a>

        <div class="method-heading">
          <a href="#M000592" class="method-signature">
          <span class="method-name">fee_collection_view</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000592-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000592-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 784</span>
784:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_collection_view</span>
785:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
786:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000615" class="method-detail">
        <a name="M000615"></a>

        <div class="method-heading">
          <a href="#M000615" class="method-signature">
          <span class="method-name">fee_defaulters_pdf</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000615-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000615-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1070</span>
1070:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fee_defaulters_pdf</span>
1071:     <span class="ruby-ivar">@batch</span>   = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
1072:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
1073:     <span class="ruby-ivar">@students</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">all_students</span>
1074:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
1075:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
1076:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">pdf</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }
1077:     <span class="ruby-keyword kw">end</span>
1078:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000612" class="method-detail">
        <a name="M000612"></a>

        <div class="method-heading">
          <a href="#M000612" class="method-signature">
          <span class="method-name">fees_defaulters</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
fees defaulters&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000612-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000612-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1046</span>
1046:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_defaulters</span>
1047:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
1048:     <span class="ruby-ivar">@dates</span> = []
1049:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000614" class="method-detail">
        <a name="M000614"></a>

        <div class="method-heading">
          <a href="#M000614" class="method-signature">
          <span class="method-name">fees_defaulters_students</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000614-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000614-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1060</span>
1060:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_defaulters_students</span>
1061:     <span class="ruby-ivar">@batch</span>   = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
1062:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
1063:     <span class="ruby-ivar">@students</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">all_students</span>
1064: 
1065:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
1066:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_defaulters&quot;</span>
1067:     <span class="ruby-keyword kw">end</span>
1068:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000574" class="method-detail">
        <a name="M000574"></a>

        <div class="method-heading">
          <a href="#M000574" class="method-signature">
          <span class="method-name">fees_particulars_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000574-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000574-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 552</span>
552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_particulars_create</span>
553:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_particulars</span>])
554:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@finance_fee_particulars</span>.<span class="ruby-identifier">save</span>
555:       <span class="ruby-ivar">@error</span> = <span class="ruby-keyword kw">true</span>
556:     <span class="ruby-keyword kw">end</span>
557:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>( <span class="ruby-ivar">@finance_fee_particulars</span> .<span class="ruby-identifier">finance_fee_category_id</span>)
558:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@finance_fee_category.id}' &quot;</span>])
559: 
560:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000573" class="method-detail">
        <a name="M000573"></a>

        <div class="method-heading">
          <a href="#M000573" class="method-signature">
          <span class="method-name">fees_particulars_new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000573-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000573-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 543</span>
543:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_particulars_new</span>
544:     <span class="ruby-ivar">@fees_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span> ,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = 1&quot;</span>])
545:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
546:     <span class="ruby-ivar">@finance_fee_particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>
547:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
548:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'fees_particulars_new'</span> }
549:     <span class="ruby-keyword kw">end</span>
550:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000540" class="method-detail">
        <a name="M000540"></a>

        <div class="method-heading">
          <a href="#M000540" class="method-signature">
          <span class="method-name">fees_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000540-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000540-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 238</span>
238:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_report</span>
239:     <span class="ruby-identifier">month_date</span>
240:     <span class="ruby-comment cmt">#@fees = FinanceTransaction.find(:all,:order =&gt; 'created_at desc', :conditions =&gt; [&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@last_date}'and category_id ='#{3}'&quot;])</span>
241:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
242:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000609" class="method-detail">
        <a name="M000609"></a>

        <div class="method-heading">
          <a href="#M000609" class="method-signature">
          <span class="method-name">fees_structure_dates</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000609-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000609-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1020</span>
1020:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_structure_dates</span>
1021:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
1022:     <span class="ruby-ivar">@dates</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">batch</span>.<span class="ruby-identifier">fee_collection_dates</span>
1023:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000610" class="method-detail">
        <a name="M000610"></a>

        <div class="method-heading">
          <a href="#M000610" class="method-signature">
          <span class="method-name">fees_structure_for_student</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000610-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000610-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1025</span>
1025:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_structure_for_student</span>
1026:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
1027:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>]
1028:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
1029:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
1030:     
1031:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
1032:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;fees_structure&quot;</span> , <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_structure&quot;</span>
1033:     <span class="ruby-keyword kw">end</span>
1034:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000604" class="method-detail">
        <a name="M000604"></a>

        <div class="method-heading">
          <a href="#M000604" class="method-signature">
          <span class="method-name">fees_student_dates</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000604-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000604-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 942</span>
942:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_student_dates</span>
943:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
944:     <span class="ruby-ivar">@dates</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">batch</span>.<span class="ruby-identifier">fee_collection_dates</span>
945:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000608" class="method-detail">
        <a name="M000608"></a>

        <div class="method-heading">
          <a href="#M000608" class="method-signature">
          <span class="method-name">fees_student_structure_search_logic</span><span class="method-args">(</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
fees structure &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000608-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000608-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1014</span>
1014:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_student_structure_search_logic</span> <span class="ruby-comment cmt"># student search fees structure</span>
1015:     <span class="ruby-identifier">query</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:query</span>]
1016:     <span class="ruby-ivar">@students_result</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">first_name_like</span> <span class="ruby-identifier">query</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
1017:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1018:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000597" class="method-detail">
        <a name="M000597"></a>

        <div class="method-heading">
          <a href="#M000597" class="method-signature">
          <span class="method-name">fees_submission_batch</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
fees_submission&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000597-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000597-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 814</span>
814:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_submission_batch</span>
815: 
816:     <span class="ruby-ivar">@batches</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
817:     <span class="ruby-ivar">@dates</span> = []
818: 
819:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000607" class="method-detail">
        <a name="M000607"></a>

        <div class="method-heading">
          <a href="#M000607" class="method-signature">
          <span class="method-name">fees_submission_save</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000607-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000607-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 980</span>
 980:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_submission_save</span>
 981: 
 982:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>])
 983:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
 984:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@date</span>.<span class="ruby-identifier">fee_transactions</span>(<span class="ruby-ivar">@student</span>.<span class="ruby-identifier">id</span>)
 985:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
 986:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
 987:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
 988:     <span class="ruby-identifier">total_fees</span> = <span class="ruby-value">0</span>
 989:     <span class="ruby-ivar">@fee_particulars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
 990:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">amount</span>
 991:     <span class="ruby-keyword kw">end</span>
 992:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">nil?</span>
 993:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">to_f</span>
 994:     <span class="ruby-keyword kw">end</span>
 995:   
 996:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>
 997:       <span class="ruby-identifier">transaction</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">new</span>
 998:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">title</span> = <span class="ruby-node">&quot;Recipit No. F#{@financefee.id}&quot;</span>
 999:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Fee&quot;</span>)
1000:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">student_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]
1001:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">finance_fees_id</span> = <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">id</span>
1002:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">fine_included</span> = <span class="ruby-keyword kw">true</span>  <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">nil?</span>
1003:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">amount</span> = <span class="ruby-identifier">total_fees</span>
1004:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">save</span>
1005:       <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:transaction_id</span>, <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">id</span>)
1006:     <span class="ruby-keyword kw">end</span>
1007:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Fees Paid'</span>
1008:     <span class="ruby-identifier">redirect_to</span>  <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_student_search&quot;</span>
1009:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000605" class="method-detail">
        <a name="M000605"></a>

        <div class="method-heading">
          <a href="#M000605" class="method-signature">
          <span class="method-name">fees_submission_student</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000605-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000605-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 947</span>
947:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fees_submission_student</span>
948:     
949:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
950:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
951:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span>(<span class="ruby-ivar">@date</span>)
952:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
953:     <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">due_date</span>
954:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
955:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
956: 
957:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
958:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;fee_submission&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_submission_form&quot;</span>
959:     <span class="ruby-keyword kw">end</span>
960: 
961:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000623" class="method-detail">
        <a name="M000623"></a>

        <div class="method-heading">
          <a href="#M000623" class="method-signature">
          <span class="method-name">graph_for_compare_monthly_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000623-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000623-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1271</span>
1271:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">graph_for_compare_monthly_report</span>
1272: 
1273:     <span class="ruby-identifier">start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
1274:     <span class="ruby-identifier">end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
1275:     <span class="ruby-identifier">start_date2</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date2</span>]).<span class="ruby-identifier">to_date</span>
1276:     <span class="ruby-identifier">end_date2</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date2</span>]).<span class="ruby-identifier">to_date</span>
1277:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1278: 
1279:     <span class="ruby-identifier">hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
1280:     <span class="ruby-identifier">donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1281:     <span class="ruby-identifier">donations_total2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-identifier">start_date2</span>,<span class="ruby-identifier">end_date2</span>)
1282:     <span class="ruby-identifier">fees</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1283:     <span class="ruby-identifier">fees2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-identifier">start_date2</span>,<span class="ruby-identifier">end_date2</span>)
1284:     <span class="ruby-identifier">other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1285:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{start_date}' and created_at &lt;= '#{end_date}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>])
1286:     <span class="ruby-identifier">other_transactions2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1287:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{start_date2}' and created_at &lt;= '#{end_date2}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>])
1288: 
1289: 
1290:     <span class="ruby-identifier">x_labels</span> = []
1291:     <span class="ruby-identifier">data</span> = []
1292:     <span class="ruby-identifier">data2</span> = []
1293:     <span class="ruby-identifier">largest_value</span> =<span class="ruby-value">0</span>
1294: 
1295:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">hr</span>.<span class="ruby-identifier">nil?</span>
1296:       <span class="ruby-identifier">salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>,<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1297:       <span class="ruby-identifier">salary2</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>,<span class="ruby-identifier">start_date2</span>,<span class="ruby-identifier">end_date2</span>)
1298:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">salary</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">salary2</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1299:         <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Salary&quot;</span>
1300:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">salary</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">salary</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>)
1301:         <span class="ruby-identifier">data2</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">salary2</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">salary2</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>)
1302:         <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">salary</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">salary</span>
1303:         <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">salary2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">salary2</span>
1304:       <span class="ruby-keyword kw">end</span>
1305:     <span class="ruby-keyword kw">end</span>
1306:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">donations_total</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">donations_total2</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1307:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Donations&quot;</span>
1308:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">donations_total</span>
1309:       <span class="ruby-identifier">data2</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">donations_total2</span>
1310:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">donations_total</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">donations_total</span>
1311:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">donations_total2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">donations_total2</span>
1312:     <span class="ruby-keyword kw">end</span>
1313: 
1314:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fees</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">fees2</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1315:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Fees&quot;</span>
1316:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fees</span>
1317:       <span class="ruby-identifier">data2</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fees2</span>
1318:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">fees</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">fees</span>
1319:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">fees2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">fees2</span>
1320:     <span class="ruby-keyword kw">end</span>
1321:     <span class="ruby-identifier">other</span> = <span class="ruby-value">0</span>
1322:     <span class="ruby-identifier">other_transactions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">trans</span><span class="ruby-operator">|</span>
1323:       
1324:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">category</span>.<span class="ruby-identifier">is_income?</span>
1325:         <span class="ruby-identifier">other</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1326:       <span class="ruby-keyword kw">else</span>
1327:         <span class="ruby-identifier">other</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1328:       <span class="ruby-keyword kw">end</span>
1329:     <span class="ruby-keyword kw">end</span>
1330:     <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;other&quot;</span>
1331:     <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">other</span>
1332:     <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">other</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">other</span>
1333:     <span class="ruby-identifier">other2</span> = <span class="ruby-value">0</span>
1334:     <span class="ruby-identifier">other_transactions2</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">trans2</span><span class="ruby-operator">|</span>
1335:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trans2</span>.<span class="ruby-identifier">category</span>.<span class="ruby-identifier">is_income?</span>
1336:         <span class="ruby-identifier">other2</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">trans2</span>.<span class="ruby-identifier">amount</span>
1337:       <span class="ruby-keyword kw">else</span>
1338:         <span class="ruby-identifier">other2</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">trans2</span>.<span class="ruby-identifier">amount</span>
1339:       <span class="ruby-keyword kw">end</span>
1340:     <span class="ruby-keyword kw">end</span>
1341:     <span class="ruby-identifier">data2</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">other2</span>
1342:     <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">other2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">other2</span>
1343: 
1344:     <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">+=</span> <span class="ruby-value">500</span>
1345: 
1346:     <span class="ruby-identifier">bargraph</span> = <span class="ruby-constant">BarFilled</span>.<span class="ruby-identifier">new</span>()
1347:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">width</span> = <span class="ruby-value">1</span>;
1348:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">colour</span> = <span class="ruby-value str">'#bb0000'</span>;
1349:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">dot_size</span> = <span class="ruby-value">3</span>;
1350:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">text</span> = <span class="ruby-node">&quot;For the period #{start_date}-#{end_date}&quot;</span>
1351:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">values</span> = <span class="ruby-identifier">data</span>
1352:     <span class="ruby-identifier">bargraph2</span> = <span class="ruby-constant">BarFilled</span>.<span class="ruby-identifier">new</span>()
1353:     <span class="ruby-identifier">bargraph2</span>.<span class="ruby-identifier">width</span> = <span class="ruby-value">1</span>;
1354:     <span class="ruby-identifier">bargraph2</span>.<span class="ruby-identifier">colour</span> = <span class="ruby-value str">'#000000'</span>;
1355:     <span class="ruby-identifier">bargraph2</span>.<span class="ruby-identifier">dot_size</span> = <span class="ruby-value">3</span>;
1356:     <span class="ruby-identifier">bargraph2</span>.<span class="ruby-identifier">text</span> = <span class="ruby-node">&quot;For the period #{start_date2}-#{end_date2}&quot;</span>
1357:     <span class="ruby-identifier">bargraph2</span>.<span class="ruby-identifier">values</span> = <span class="ruby-identifier">data2</span>
1358: 
1359:     <span class="ruby-identifier">x_axis</span> = <span class="ruby-constant">XAxis</span>.<span class="ruby-identifier">new</span>
1360:     <span class="ruby-identifier">x_axis</span>.<span class="ruby-identifier">labels</span> = <span class="ruby-identifier">x_labels</span>
1361: 
1362:     <span class="ruby-identifier">y_axis</span> = <span class="ruby-constant">YAxis</span>.<span class="ruby-identifier">new</span>
1363:     <span class="ruby-identifier">y_axis</span>.<span class="ruby-identifier">set_range</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>),<span class="ruby-identifier">largest_value</span>,<span class="ruby-identifier">largest_value</span><span class="ruby-operator">/</span><span class="ruby-value">5</span>)
1364: 
1365:     <span class="ruby-identifier">title</span> = <span class="ruby-constant">Title</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Finance Transaction&quot;</span>)
1366: 
1367:     <span class="ruby-identifier">x_legend</span> = <span class="ruby-constant">XLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Examination name&quot;</span>)
1368:     <span class="ruby-identifier">x_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #778877}'</span>)
1369: 
1370:     <span class="ruby-identifier">y_legend</span> = <span class="ruby-constant">YLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Marks&quot;</span>)
1371:     <span class="ruby-identifier">y_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #770077}'</span>)
1372: 
1373:     <span class="ruby-identifier">chart</span> = <span class="ruby-constant">OpenFlashChart</span>.<span class="ruby-identifier">new</span>
1374:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_title</span>(<span class="ruby-identifier">title</span>)
1375:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_x_legend</span> = <span class="ruby-identifier">x_legend</span>
1376:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_y_legend</span> = <span class="ruby-identifier">y_legend</span>
1377:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">y_axis</span> = <span class="ruby-identifier">y_axis</span>
1378:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">x_axis</span> = <span class="ruby-identifier">x_axis</span>
1379: 
1380:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-identifier">bargraph</span>)
1381:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-identifier">bargraph2</span>)
1382: 
1383: 
1384:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">render</span>
1385: 
1386:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000624" class="method-detail">
        <a name="M000624"></a>

        <div class="method-heading">
          <a href="#M000624" class="method-signature">
          <span class="method-name">graph_for_transaction_comparison</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
ddnt complete this graph!
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000624-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000624-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1390</span>
1390:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">graph_for_transaction_comparison</span>
1391: 
1392:     <span class="ruby-identifier">start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
1393:     <span class="ruby-identifier">end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
1394:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1395: 
1396:     <span class="ruby-identifier">hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
1397:     <span class="ruby-identifier">donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1398:     <span class="ruby-identifier">fees</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1399:     <span class="ruby-identifier">other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1400:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{start_date}' and created_at &lt;= '#{end_date}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>])
1401: 
1402: 
1403:     <span class="ruby-identifier">x_labels</span> = []
1404:     <span class="ruby-identifier">data1</span> = []
1405:     <span class="ruby-identifier">data2</span> = []
1406:     
1407:     <span class="ruby-identifier">largest_value</span> =<span class="ruby-value">0</span>
1408: 
1409:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">hr</span>.<span class="ruby-identifier">nil?</span>
1410:       <span class="ruby-identifier">salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>,<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1411:     <span class="ruby-keyword kw">end</span>
1412:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">salary</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1413:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Salary&quot;</span>
1414:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">salary</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">salary</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>)
1415:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">salary</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">salary</span>
1416:     <span class="ruby-keyword kw">end</span>
1417:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">donations_total</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1418:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Donations&quot;</span>
1419:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">donations_total</span>
1420:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">donations_total</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">donations_total</span>
1421:     <span class="ruby-keyword kw">end</span>
1422: 
1423:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fees</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1424:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Fees&quot;</span>
1425:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fees</span>
1426:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">fees</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">fees</span>
1427:     <span class="ruby-keyword kw">end</span>
1428:     <span class="ruby-identifier">other_transactions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">trans</span><span class="ruby-operator">|</span>
1429:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">title</span>
1430:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">category</span>.<span class="ruby-identifier">is_income?</span>
1431:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1432:       <span class="ruby-keyword kw">else</span>
1433:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-value str">&quot;-&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">to_i</span>
1434:       <span class="ruby-keyword kw">end</span>
1435:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1436:     <span class="ruby-keyword kw">end</span>
1437: 
1438:     <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">+=</span> <span class="ruby-value">500</span>
1439: 
1440:     <span class="ruby-identifier">bargraph</span> = <span class="ruby-constant">BarFilled</span>.<span class="ruby-identifier">new</span>()
1441:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">width</span> = <span class="ruby-value">1</span>;
1442:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">colour</span> = <span class="ruby-value str">'#bb0000'</span>;
1443:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">dot_size</span> = <span class="ruby-value">3</span>;
1444:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">text</span> = <span class="ruby-value str">&quot;Amount&quot;</span>
1445:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">values</span> = <span class="ruby-identifier">data</span>
1446: 
1447:     <span class="ruby-identifier">x_axis</span> = <span class="ruby-constant">XAxis</span>.<span class="ruby-identifier">new</span>
1448:     <span class="ruby-identifier">x_axis</span>.<span class="ruby-identifier">labels</span> = <span class="ruby-identifier">x_labels</span>
1449: 
1450:     <span class="ruby-identifier">y_axis</span> = <span class="ruby-constant">YAxis</span>.<span class="ruby-identifier">new</span>
1451:     <span class="ruby-identifier">y_axis</span>.<span class="ruby-identifier">set_range</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>),<span class="ruby-identifier">largest_value</span>,<span class="ruby-identifier">largest_value</span><span class="ruby-operator">/</span><span class="ruby-value">5</span>)
1452: 
1453:     <span class="ruby-identifier">title</span> = <span class="ruby-constant">Title</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Finance Transaction&quot;</span>)
1454: 
1455:     <span class="ruby-identifier">x_legend</span> = <span class="ruby-constant">XLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Examination name&quot;</span>)
1456:     <span class="ruby-identifier">x_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #778877}'</span>)
1457: 
1458:     <span class="ruby-identifier">y_legend</span> = <span class="ruby-constant">YLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Marks&quot;</span>)
1459:     <span class="ruby-identifier">y_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #770077}'</span>)
1460: 
1461:     <span class="ruby-identifier">chart</span> = <span class="ruby-constant">OpenFlashChart</span>.<span class="ruby-identifier">new</span>
1462:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_title</span>(<span class="ruby-identifier">title</span>)
1463:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_x_legend</span> = <span class="ruby-identifier">x_legend</span>
1464:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_y_legend</span> = <span class="ruby-identifier">y_legend</span>
1465:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">y_axis</span> = <span class="ruby-identifier">y_axis</span>
1466:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">x_axis</span> = <span class="ruby-identifier">x_axis</span>
1467: 
1468:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-identifier">bargraph</span>)
1469: 
1470: 
1471:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">render</span>
1472:  
1473:    
1474:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000622" class="method-detail">
        <a name="M000622"></a>

        <div class="method-heading">
          <a href="#M000622" class="method-signature">
          <span class="method-name">graph_for_update_monthly_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
graph&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000622-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000622-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1189</span>
1189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">graph_for_update_monthly_report</span>
1190:     
1191:     <span class="ruby-identifier">start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
1192:     <span class="ruby-identifier">end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
1193:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1194:     
1195:     <span class="ruby-identifier">hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
1196:     <span class="ruby-identifier">donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1197:     <span class="ruby-identifier">fees</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1198:     <span class="ruby-identifier">other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1199:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{start_date}' and created_at &lt;= '#{end_date}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>])
1200: 
1201: 
1202:     <span class="ruby-identifier">x_labels</span> = []
1203:     <span class="ruby-identifier">data</span> = []
1204:     <span class="ruby-identifier">largest_value</span> =<span class="ruby-value">0</span>
1205:     
1206:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">hr</span>.<span class="ruby-identifier">nil?</span>
1207:       <span class="ruby-identifier">salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>,<span class="ruby-identifier">start_date</span>,<span class="ruby-identifier">end_date</span>)
1208:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">salary</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1209:         <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Salary&quot;</span>
1210:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">salary</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">salary</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>)
1211:         <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">salary</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">salary</span>
1212:       <span class="ruby-keyword kw">end</span>
1213:     <span class="ruby-keyword kw">end</span>
1214:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">donations_total</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1215:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Donations&quot;</span>
1216:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">donations_total</span>
1217:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">donations_total</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">donations_total</span>
1218:     <span class="ruby-keyword kw">end</span>
1219: 
1220:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fees</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
1221:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Fees&quot;</span>
1222:       <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fees</span>
1223:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">fees</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">fees</span>
1224:     <span class="ruby-keyword kw">end</span>
1225:     <span class="ruby-identifier">other_transactions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">trans</span><span class="ruby-operator">|</span>
1226:       <span class="ruby-identifier">x_labels</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">title</span>
1227:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">category</span>.<span class="ruby-identifier">is_income?</span>
1228:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1229:       <span class="ruby-keyword kw">else</span>
1230:         <span class="ruby-identifier">data</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-value str">&quot;-&quot;</span><span class="ruby-operator">+</span><span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_s</span>).<span class="ruby-identifier">to_i</span>
1231:       <span class="ruby-keyword kw">end</span>
1232:       <span class="ruby-identifier">largest_value</span> = <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">trans</span>.<span class="ruby-identifier">amount</span>
1233:     <span class="ruby-keyword kw">end</span>
1234: 
1235:     <span class="ruby-identifier">largest_value</span> <span class="ruby-operator">+=</span> <span class="ruby-value">500</span>
1236: 
1237:     <span class="ruby-identifier">bargraph</span> = <span class="ruby-constant">BarFilled</span>.<span class="ruby-identifier">new</span>()
1238:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">width</span> = <span class="ruby-value">1</span>;
1239:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">colour</span> = <span class="ruby-value str">'#bb0000'</span>;
1240:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">dot_size</span> = <span class="ruby-value">3</span>;
1241:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">text</span> = <span class="ruby-value str">&quot;Amount&quot;</span>
1242:     <span class="ruby-identifier">bargraph</span>.<span class="ruby-identifier">values</span> = <span class="ruby-identifier">data</span>
1243: 
1244:     <span class="ruby-identifier">x_axis</span> = <span class="ruby-constant">XAxis</span>.<span class="ruby-identifier">new</span>
1245:     <span class="ruby-identifier">x_axis</span>.<span class="ruby-identifier">labels</span> = <span class="ruby-identifier">x_labels</span>
1246: 
1247:     <span class="ruby-identifier">y_axis</span> = <span class="ruby-constant">YAxis</span>.<span class="ruby-identifier">new</span>
1248:     <span class="ruby-identifier">y_axis</span>.<span class="ruby-identifier">set_range</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">-</span>(<span class="ruby-identifier">largest_value</span><span class="ruby-operator">*</span><span class="ruby-value">2</span>),<span class="ruby-identifier">largest_value</span>,<span class="ruby-identifier">largest_value</span><span class="ruby-operator">/</span><span class="ruby-value">5</span>)
1249: 
1250:     <span class="ruby-identifier">title</span> = <span class="ruby-constant">Title</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Finance Transaction&quot;</span>)
1251: 
1252:     <span class="ruby-identifier">x_legend</span> = <span class="ruby-constant">XLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Examination name&quot;</span>)
1253:     <span class="ruby-identifier">x_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #778877}'</span>)
1254: 
1255:     <span class="ruby-identifier">y_legend</span> = <span class="ruby-constant">YLegend</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Marks&quot;</span>)
1256:     <span class="ruby-identifier">y_legend</span>.<span class="ruby-identifier">set_style</span>(<span class="ruby-value str">'{font-size: 14px; color: #770077}'</span>)
1257: 
1258:     <span class="ruby-identifier">chart</span> = <span class="ruby-constant">OpenFlashChart</span>.<span class="ruby-identifier">new</span>
1259:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_title</span>(<span class="ruby-identifier">title</span>)
1260:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_x_legend</span> = <span class="ruby-identifier">x_legend</span>
1261:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">set_y_legend</span> = <span class="ruby-identifier">y_legend</span>
1262:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">y_axis</span> = <span class="ruby-identifier">y_axis</span>
1263:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">x_axis</span> = <span class="ruby-identifier">x_axis</span>
1264: 
1265:     <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">add_element</span>(<span class="ruby-identifier">bargraph</span>)
1266: 
1267: 
1268:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">chart</span>.<span class="ruby-identifier">render</span>
1269:  
1270:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000524" class="method-detail">
        <a name="M000524"></a>

        <div class="method-heading">
          <a href="#M000524" class="method-signature">
          <span class="method-name">income_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000524-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000524-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 58</span>
58:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">income_create</span>
59:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>]=<span class="ruby-keyword kw">nil</span>
60:     <span class="ruby-ivar">@income</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:transaction</span>])
61:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">income_categories</span>
62:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@categories</span>.<span class="ruby-identifier">empty?</span>
63:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Please create category for income!&quot;</span>
64:     <span class="ruby-keyword kw">end</span>
65:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@income</span>.<span class="ruby-identifier">save</span>
66:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Income has been added to the accounts.&quot;</span>
67:     <span class="ruby-keyword kw">end</span>
68:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000526" class="method-detail">
        <a name="M000526"></a>

        <div class="method-heading">
          <a href="#M000526" class="method-signature">
          <span class="method-name">income_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000526-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000526-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 74</span>
74:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">income_edit</span>
75:     <span class="ruby-ivar">@transaction</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
76:     <span class="ruby-ivar">@categories</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:is_income</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>} )
77:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@transaction</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:transaction</span>])
78:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;The entry has been edited.&quot;</span>
79:     <span class="ruby-keyword kw">end</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000516" class="method-detail">
        <a name="M000516"></a>

        <div class="method-heading">
          <a href="#M000516" class="method-signature">
          <span class="method-name">index</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000516-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000516-source">
<pre>
   <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 5</span>
5:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index</span>
6:     <span class="ruby-ivar">@hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
7:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000599" class="method-detail">
        <a name="M000599"></a>

        <div class="method-heading">
          <a href="#M000599" class="method-signature">
          <span class="method-name">load_fees_submission_batch</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000599-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000599-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 831</span>
831:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_fees_submission_batch</span>
832:     
833:     <span class="ruby-ivar">@batch</span>   = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
834:     <span class="ruby-ivar">@dates</span>   = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
835:     <span class="ruby-ivar">@date</span>    = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
836:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]
837: 
838:     <span class="ruby-ivar">@student</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">students</span>.<span class="ruby-identifier">first</span>
839:     <span class="ruby-ivar">@prev_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">previous_student</span>
840:     <span class="ruby-ivar">@next_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">next_student</span>
841: 
842:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span> <span class="ruby-ivar">@date</span>
843:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
844:     <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">due_date</span>
845:    
846:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted = false&quot;</span>])
847:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
848: 
849:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
850:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_fees_submission&quot;</span>
851:     <span class="ruby-keyword kw">end</span>
852:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000565" class="method-detail">
        <a name="M000565"></a>

        <div class="method-heading">
          <a href="#M000565" class="method-signature">
          <span class="method-name">master_category_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000565-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000565-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 476</span>
476:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_create</span>
477:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_category</span>])
478:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">is_master</span> = <span class="ruby-keyword kw">true</span>
479:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">save</span>
480:       <span class="ruby-ivar">@error</span> = <span class="ruby-keyword kw">true</span>
481:     <span class="ruby-keyword kw">end</span>
482:     <span class="ruby-ivar">@master_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>] ,<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = 1&quot;</span>])
483:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
484:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_create'</span> }
485:     <span class="ruby-keyword kw">end</span>
486:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000572" class="method-detail">
        <a name="M000572"></a>

        <div class="method-heading">
          <a href="#M000572" class="method-signature">
          <span class="method-name">master_category_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000572-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000572-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 533</span>
533:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_delete</span>
534:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
535:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
536:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">delete_particulars</span>
537:     <span class="ruby-ivar">@master_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = 1&quot;</span>])
538:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
539:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_delete'</span> }
540:     <span class="ruby-keyword kw">end</span>
541:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000566" class="method-detail">
        <a name="M000566"></a>

        <div class="method-heading">
          <a href="#M000566" class="method-signature">
          <span class="method-name">master_category_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000566-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000566-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 488</span>
488:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_edit</span>
489:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
490:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
491:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_edit'</span> }
492:     <span class="ruby-keyword kw">end</span>
493:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000564" class="method-detail">
        <a name="M000564"></a>

        <div class="method-heading">
          <a href="#M000564" class="method-signature">
          <span class="method-name">master_category_new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000564-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000564-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 468</span>
468:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_new</span>
469:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">new</span>
470:     <span class="ruby-ivar">@batches</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
471:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
472:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_new'</span> }
473:     <span class="ruby-keyword kw">end</span>
474:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000568" class="method-detail">
        <a name="M000568"></a>

        <div class="method-heading">
          <a href="#M000568" class="method-signature">
          <span class="method-name">master_category_particulars</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000568-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000568-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 501</span>
501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_particulars</span>
502:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
503:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@finance_fee_category.id}' &quot;</span>])
504:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
505:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_particulars'</span> }
506:     <span class="ruby-keyword kw">end</span>
507:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000571" class="method-detail">
        <a name="M000571"></a>

        <div class="method-heading">
          <a href="#M000571" class="method-signature">
          <span class="method-name">master_category_particulars_delete</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000571-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000571-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 524</span>
524:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_particulars_delete</span>
525:     <span class="ruby-ivar">@feeparticulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>( <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
526:     <span class="ruby-ivar">@feeparticulars</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:is_deleted</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> )
527:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@feeparticulars</span>.<span class="ruby-identifier">finance_fee_category_id</span>)
528:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@finance_fee_category.id}' &quot;</span>])
529:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
530:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_particulars'</span> }
531:     <span class="ruby-keyword kw">end</span>
532:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000569" class="method-detail">
        <a name="M000569"></a>

        <div class="method-heading">
          <a href="#M000569" class="method-signature">
          <span class="method-name">master_category_particulars_edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000569-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000569-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 508</span>
508:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_particulars_edit</span>
509:     <span class="ruby-ivar">@finance_fee_particulars</span>= <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
510:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
511:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_particulars_edit'</span> }
512:     <span class="ruby-keyword kw">end</span>
513:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000570" class="method-detail">
        <a name="M000570"></a>

        <div class="method-heading">
          <a href="#M000570" class="method-signature">
          <span class="method-name">master_category_particulars_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000570-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000570-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 515</span>
515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_particulars_update</span>
516:     <span class="ruby-ivar">@feeparticulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">find</span>( <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
517:     <span class="ruby-ivar">@feeparticulars</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_particulars</span>])
518:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@feeparticulars</span>.<span class="ruby-identifier">finance_fee_category_id</span>)
519:     <span class="ruby-ivar">@particulars</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and finance_fee_category_id = '#{@finance_fee_category.id}' &quot;</span>])
520:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
521:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">js</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'master_category_particulars'</span> }
522:     <span class="ruby-keyword kw">end</span>
523:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000567" class="method-detail">
        <a name="M000567"></a>

        <div class="method-heading">
          <a href="#M000567" class="method-signature">
          <span class="method-name">master_category_update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000567-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000567-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 495</span>
495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_category_update</span>
496:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
497:     <span class="ruby-ivar">@finance_fee_category</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:finance_fee_category</span>])
498:     <span class="ruby-ivar">@master_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span>[<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = 1&quot;</span>])
499:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000563" class="method-detail">
        <a name="M000563"></a>

        <div class="method-heading">
          <a href="#M000563" class="method-signature">
          <span class="method-name">master_fees</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
fees &#8212;&#8212;&#8212;&#8212;&#8212;-
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000563-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000563-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 460</span>
460:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">master_fees</span>
461:     <span class="ruby-ivar">@finance_fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">new</span>
462:     <span class="ruby-ivar">@finance_fee_particular</span> = <span class="ruby-constant">FinanceFeeParticulars</span>.<span class="ruby-identifier">new</span>
463:     <span class="ruby-ivar">@batches</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">active</span>
464:     <span class="ruby-ivar">@master_categories</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">:page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>],<span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;is_deleted = '#{false}' and is_master = 1&quot;</span>])
465:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
466:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000620" class="method-detail">
        <a name="M000620"></a>

        <div class="method-heading">
          <a href="#M000620" class="method-signature">
          <span class="method-name">month_date</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000620-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000620-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1162</span>
1162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">month_date</span>
1163:     <span class="ruby-ivar">@start_date</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start</span>]
1164:     <span class="ruby-ivar">@end_date</span>  = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end</span>]
1165:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000525" class="method-detail">
        <a name="M000525"></a>

        <div class="method-heading">
          <a href="#M000525" class="method-signature">
          <span class="method-name">monthly_income</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000525-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000525-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">monthly_income</span>
71:       
72:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000544" class="method-detail">
        <a name="M000544"></a>

        <div class="method-heading">
          <a href="#M000544" class="method-signature">
          <span class="method-name">one_click_approve</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000544-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000544-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">one_click_approve</span>
268:     <span class="ruby-ivar">@dates</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>],<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_approved = false&quot;</span>])
269:     <span class="ruby-ivar">@salary_date</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>]
270:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
271:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;approve&quot;</span>,<span class="ruby-identifier">:partial=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;one_click_approve&quot;</span>
272:     <span class="ruby-keyword kw">end</span>
273:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000545" class="method-detail">
        <a name="M000545"></a>

        <div class="method-heading">
          <a href="#M000545" class="method-signature">
          <span class="method-name">one_click_approve_submit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000545-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000545-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 275</span>
275:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">one_click_approve_submit</span>
276:     <span class="ruby-identifier">dates</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-constant">Date</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>]))
277: 
278:     <span class="ruby-identifier">dates</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
279:       <span class="ruby-identifier">d</span>.<span class="ruby-identifier">approve</span>(<span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">id</span>)
280:     <span class="ruby-keyword kw">end</span>
281:     <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">'Payslip has been approved'</span>
282:     <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>
283:     
284:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000616" class="method-detail">
        <a name="M000616"></a>

        <div class="method-heading">
          <a href="#M000616" class="method-signature">
          <span class="method-name">pay_fees_defaulters</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000616-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000616-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1080</span>
1080:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pay_fees_defaulters</span>
1081:     <span class="ruby-ivar">@fine</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">to_f</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">nil?</span>
1082:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
1083:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
1084:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@date</span>.<span class="ruby-identifier">fee_transactions</span>(<span class="ruby-ivar">@student</span>.<span class="ruby-identifier">id</span>)
1085:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
1086:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
1087:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
1088: 
1089:     <span class="ruby-identifier">total_fees</span> = <span class="ruby-value">0</span>
1090:     <span class="ruby-ivar">@fee_particulars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
1091:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">amount</span>
1092:     <span class="ruby-keyword kw">end</span>
1093:     <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@fine</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@fine</span>.<span class="ruby-identifier">nil?</span>
1094: 
1095:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>
1096: 
1097:       <span class="ruby-identifier">transaction</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">new</span>
1098:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">title</span> = <span class="ruby-node">&quot;Recipit No. F#{@financefee.id}&quot;</span>
1099:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Fee&quot;</span>)
1100:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">student_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]
1101:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">finance_fees_id</span> = <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">id</span>
1102:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">amount</span> = <span class="ruby-identifier">total_fees</span>
1103:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">fine_included</span> = <span class="ruby-keyword kw">true</span>  <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@fine</span>.<span class="ruby-identifier">nil?</span>
1104:       <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">save</span>
1105:       <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:transaction_id</span>, <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">id</span>)
1106: 
1107:       <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Fees Paid&quot;</span>
1108:       <span class="ruby-identifier">redirect_to</span>  <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_defaulters&quot;</span>
1109:     
1110:     <span class="ruby-keyword kw">end</span>
1111:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000621" class="method-detail">
        <a name="M000621"></a>

        <div class="method-heading">
          <a href="#M000621" class="method-signature">
          <span class="method-name">pdf_fee_structure</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
reports pdf&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000621-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000621-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1171</span>
1171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pdf_fee_structure</span>
1172:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
1173:     <span class="ruby-ivar">@institution_name</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;InstitutionName&quot;</span>)
1174:     <span class="ruby-ivar">@institution_address</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;InstitutionAddress&quot;</span>)
1175:     <span class="ruby-ivar">@institution_phone_no</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;InstitutionPhoneNo&quot;</span>)
1176:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
1177:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>]
1178:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
1179:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
1180:     <span class="ruby-ivar">@total</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-ivar">@fee_particulars</span>)
1181:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
1182:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">pdf</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }
1183:     <span class="ruby-keyword kw">end</span>
1184:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000619" class="method-detail">
        <a name="M000619"></a>

        <div class="method-heading">
          <a href="#M000619" class="method-signature">
          <span class="method-name">report_compare</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000619-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000619-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1134</span>
1134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">report_compare</span>
1135:     <span class="ruby-ivar">@hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
1136:     <span class="ruby-ivar">@start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
1137:     <span class="ruby-ivar">@end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
1138:     <span class="ruby-ivar">@start_date2</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date2</span>]).<span class="ruby-identifier">to_date</span>
1139:     <span class="ruby-ivar">@end_date2</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date2</span>]).<span class="ruby-identifier">to_date</span>
1140:     <span class="ruby-ivar">@transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1141:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@end_date}'&quot;</span>])
1142:     <span class="ruby-ivar">@transactions2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
1143:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date2}' and created_at &lt;= '#{@end_date2}'&quot;</span>])
1144:     <span class="ruby-ivar">@other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@end_date}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>],
1145:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at'</span>)
1146:     <span class="ruby-comment cmt">#    @other_transactions = FinanceTransaction.report(@start_date,@end_date,params[:page])</span>
1147:     <span class="ruby-ivar">@other_transactions2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date2}' and created_at &lt;= '#{@end_date2}'and category_id !='#{3}' and category_id !='#{2}'and category_id !='#{1}'&quot;</span>],
1148:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at'</span>)
1149:     <span class="ruby-comment cmt">#    @transactions_fees = FinanceTransaction.total_fees(@start_date,@end_date)</span>
1150:     <span class="ruby-ivar">@transactions_fees2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-ivar">@start_date2</span>,<span class="ruby-ivar">@end_date2</span>)
1151:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1152:     <span class="ruby-ivar">@salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>, <span class="ruby-ivar">@start_date</span>, <span class="ruby-ivar">@end_date</span>)
1153:     <span class="ruby-ivar">@salary2</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>, <span class="ruby-ivar">@start_date2</span>, <span class="ruby-ivar">@end_date2</span>)
1154:     <span class="ruby-ivar">@donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
1155:     <span class="ruby-ivar">@donations_total2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-ivar">@start_date2</span>,<span class="ruby-ivar">@end_date2</span>)
1156:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1157:     <span class="ruby-ivar">@grand_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">grand_total</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
1158:     <span class="ruby-ivar">@grand_total2</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">grand_total</span>(<span class="ruby-ivar">@start_date2</span>,<span class="ruby-ivar">@end_date2</span>)
1159:     <span class="ruby-ivar">@graph</span> = <span class="ruby-identifier">open_flash_chart_object</span>(<span class="ruby-value">960</span>, <span class="ruby-value">500</span>, <span class="ruby-node">&quot;graph_for_compare_monthly_report?start_date=#{@start_date}&amp;end_date=#{@end_date}&amp;start_date2=#{@start_date2}&amp;end_date2=#{@end_date2}&quot;</span>)
1160:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000536" class="method-detail">
        <a name="M000536"></a>

        <div class="method-heading">
          <a href="#M000536" class="method-signature">
          <span class="method-name">salary_department</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000536-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000536-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">salary_department</span>
162:     <span class="ruby-identifier">month_date</span>
163:     <span class="ruby-ivar">@departments</span> = <span class="ruby-constant">EmployeeDepartment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
164:     <span class="ruby-ivar">@monthly_payslips</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary_date desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;salary_date &gt;= '#{@start_date}' and salary_date &lt;= '#{@last_date}' and is_approved = 1&quot;</span>])
165: 
166:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000537" class="method-detail">
        <a name="M000537"></a>

        <div class="method-heading">
          <a href="#M000537" class="method-signature">
          <span class="method-name">salary_employee</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000537-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000537-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 168</span>
168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">salary_employee</span>
169:     <span class="ruby-identifier">month_date</span>
170:     <span class="ruby-ivar">@department</span> = <span class="ruby-constant">EmployeeDepartment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
171:     <span class="ruby-ivar">@employees</span> = <span class="ruby-ivar">@department</span>.<span class="ruby-identifier">employees</span>
172:     <span class="ruby-ivar">@monthly_payslips</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary_date desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;salary_date &gt;= '#{@start_date}' and salary_date &lt;= '#{@last_date}' and is_approved = 1&quot;</span>])
173: 
174:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000550" class="method-detail">
        <a name="M000550"></a>

        <div class="method-heading">
          <a href="#M000550" class="method-signature">
          <span class="method-name">search_ajax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000550-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000550-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 371</span>
371:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">search_ajax</span>
372:     <span class="ruby-identifier">other_conditions</span> = <span class="ruby-value str">&quot;&quot;</span>
373:     <span class="ruby-identifier">other_conditions</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; AND employee_department_id = '#{params[:employee_department_id]}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:employee_department_id</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
374:     <span class="ruby-identifier">other_conditions</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; AND employee_category_id = '#{params[:employee_category_id]}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:employee_category_id</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
375:     <span class="ruby-identifier">other_conditions</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; AND employee_position_id = '#{params[:employee_position_id]}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:employee_position_id</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
376:     <span class="ruby-identifier">other_conditions</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; AND employee_grade_id = '#{params[:employee_grade_id]}'&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:employee_grade_id</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
377:     <span class="ruby-ivar">@employee</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
378:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;(first_name LIKE \&quot;#{params[:query]}%\&quot;
379:                        OR middle_name LIKE \&quot;#{params[:query]}%\&quot;
380:                        OR last_name LIKE \&quot;#{params[:query]}%\&quot;
381:                        OR (concat(first_name, \&quot; \&quot;, last_name) LIKE \&quot;#{params[:query]}%\&quot;))&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">other_conditions</span>,
382: 
383:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first_name asc&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:query</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">''</span>
384:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
385:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000603" class="method-detail">
        <a name="M000603"></a>

        <div class="method-heading">
          <a href="#M000603" class="method-signature">
          <span class="method-name">search_logic</span><span class="method-args">(</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000603-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000603-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 936</span>
936:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">search_logic</span>                 <span class="ruby-comment cmt">#student search (fees submission)</span>
937:     <span class="ruby-identifier">query</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:query</span>]
938:     <span class="ruby-ivar">@students_result</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">first_name_like</span> <span class="ruby-identifier">query</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">query</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
939:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
940:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000601" class="method-detail">
        <a name="M000601"></a>

        <div class="method-heading">
          <a href="#M000601" class="method-signature">
          <span class="method-name">student_fee_receipt_pdf</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000601-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000601-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 895</span>
895:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">student_fee_receipt_pdf</span>
896:     <span class="ruby-ivar">@date</span>    = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>])
897:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
898: 
899:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span> <span class="ruby-ivar">@date</span>
900:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>])
901:     <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">due_date</span>
902: 
903:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted = false&quot;</span>])
904:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
905:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
906:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
907:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">pdf</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }
908:     <span class="ruby-keyword kw">end</span>
909: 
910:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000542" class="method-detail">
        <a name="M000542"></a>

        <div class="method-heading">
          <a href="#M000542" class="method-signature">
          <span class="method-name">student_fees_structure</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000542-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000542-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 252</span>
252:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">student_fees_structure</span>
253:     
254:     <span class="ruby-identifier">month_date</span>
255:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
256:     <span class="ruby-ivar">@components</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">get_fee_strucure_elements</span>
257:     
258:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000611" class="method-detail">
        <a name="M000611"></a>

        <div class="method-heading">
          <a href="#M000611" class="method-signature">
          <span class="method-name">student_fees_structure</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000611-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000611-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1036</span>
1036:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">student_fees_structure</span>
1037:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
1038:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id2</span>]
1039:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
1040:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
1041:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000583" class="method-detail">
        <a name="M000583"></a>

        <div class="method-heading">
          <a href="#M000583" class="method-signature">
          <span class="method-name">student_or_student_category</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000583-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000583-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 673</span>
673:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">student_or_student_category</span>
674:     <span class="ruby-ivar">@student_categories</span> = <span class="ruby-constant">StudentCategory</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
675: 
676:     <span class="ruby-identifier">select_value</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:select_value</span>]
677: 
678:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">select_value</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;category&quot;</span>
679:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
680:         <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_category_particulars&quot;</span>
681:       <span class="ruby-keyword kw">end</span>
682:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">select_value</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;student&quot;</span>
683:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
684:         <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_admission_particulars&quot;</span>
685:       <span class="ruby-keyword kw">end</span>
686:     <span class="ruby-keyword kw">end</span>
687:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000535" class="method-detail">
        <a name="M000535"></a>

        <div class="method-heading">
          <a href="#M000535" class="method-signature">
          <span class="method-name">transaction_pdf</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000535-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000535-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transaction_pdf</span>
142:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
143:     <span class="ruby-ivar">@hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
144:     <span class="ruby-ivar">@start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
145:     <span class="ruby-ivar">@end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
146:     <span class="ruby-ivar">@transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
147:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@end_date}'&quot;</span>])
148:     <span class="ruby-ivar">@other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">report</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>])
149:     <span class="ruby-ivar">@transactions_fees</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
150:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
151:     <span class="ruby-ivar">@salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>, <span class="ruby-ivar">@start_date</span>, <span class="ruby-ivar">@end_date</span>)
152:     <span class="ruby-ivar">@donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
153:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
154:     <span class="ruby-ivar">@grand_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">grand_total</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
155:     <span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">format</span><span class="ruby-operator">|</span>
156:       <span class="ruby-identifier">format</span>.<span class="ruby-identifier">pdf</span> { <span class="ruby-identifier">render</span> <span class="ruby-identifier">:layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }
157:     <span class="ruby-keyword kw">end</span>
158: 
159:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000533" class="method-detail">
        <a name="M000533"></a>

        <div class="method-heading">
          <a href="#M000533" class="method-signature">
          <span class="method-name">transaction_trigger_create</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000533-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000533-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 113</span>
113:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transaction_trigger_create</span>
114:     <span class="ruby-ivar">@trigger</span> = <span class="ruby-constant">FinanceTransactionTrigger</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:transaction_trigger</span>])
115:     <span class="ruby-ivar">@triggers</span> = <span class="ruby-constant">FinanceTransactionTrigger</span>.<span class="ruby-identifier">all</span>
116:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
117:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">'transaction-triggers-list'</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'transaction_triggers_list'</span>
118:     <span class="ruby-keyword kw">end</span>
119:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000600" class="method-detail">
        <a name="M000600"></a>

        <div class="method-heading">
          <a href="#M000600" class="method-signature">
          <span class="method-name">update_ajax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000600-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000600-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 854</span>
854:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_ajax</span>
855: 
856:     <span class="ruby-ivar">@batch</span>   = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
857:     <span class="ruby-ivar">@dates</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
858:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
859:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]
860:     <span class="ruby-ivar">@student</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">students</span>.<span class="ruby-identifier">first</span>
861:     <span class="ruby-ivar">@prev_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">previous_student</span>
862:     <span class="ruby-ivar">@next_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">next_student</span>
863: 
864:     <span class="ruby-identifier">total_fees</span> =<span class="ruby-value">0</span>
865: 
866:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span> <span class="ruby-ivar">@date</span>
867:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:date</span>])
868:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
869:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
870:     <span class="ruby-ivar">@fee_particulars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
871:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">amount</span>
872:     <span class="ruby-keyword kw">end</span>
873:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">nil?</span>
874:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">to_f</span>
875:     <span class="ruby-keyword kw">end</span>
876:        
877:     <span class="ruby-identifier">transaction</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">new</span>
878:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">title</span> = <span class="ruby-node">&quot;Recipit No. F#{@financefee.id}&quot;</span>
879:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">category</span> = <span class="ruby-constant">FinanceTransactionCategory</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Fee&quot;</span>)
880:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">student_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:student</span>]
881:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">amount</span> = <span class="ruby-identifier">total_fees</span>
882:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">fine_included</span> = <span class="ruby-keyword kw">true</span>  <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>].<span class="ruby-identifier">nil?</span>
883:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">finance_fees_id</span> = <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">id</span>
884:     <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">save</span>
885: 
886:     <span class="ruby-ivar">@financefee</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:transaction_id</span>, <span class="ruby-identifier">transaction</span>.<span class="ruby-identifier">id</span>)
887: 
888:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
889:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_fees_submission&quot;</span>
890:       
891:     <span class="ruby-keyword kw">end</span>
892: 
893:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000560" class="method-detail">
        <a name="M000560"></a>

        <div class="method-heading">
          <a href="#M000560" class="method-signature">
          <span class="method-name">update_asset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000560-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000560-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 436</span>
436:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_asset</span>
437:     <span class="ruby-ivar">@asset</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
438:     <span class="ruby-ivar">@asset</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:asset</span>])
439:     <span class="ruby-ivar">@assets</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
440:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
441:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;asset_list&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;asset_list&quot;</span>
442:     <span class="ruby-keyword kw">end</span>
443:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000617" class="method-detail">
        <a name="M000617"></a>

        <div class="method-heading">
          <a href="#M000617" class="method-signature">
          <span class="method-name">update_defaulters_fine_ajax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000617-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000617-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1113</span>
1113:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_defaulters_fine_ajax</span>
1114:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:student</span>])
1115:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
1116:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@date</span>.<span class="ruby-identifier">fee_transactions</span>(<span class="ruby-ivar">@student</span>.<span class="ruby-identifier">id</span>)
1117:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
1118:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
1119:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
1120:     <span class="ruby-ivar">@fine</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:fee</span>].<span class="ruby-identifier">to_f</span>
1121: 
1122:     <span class="ruby-identifier">total_fees</span> = <span class="ruby-value">0</span>
1123:     <span class="ruby-ivar">@fee_particulars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
1124:       <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">amount</span>
1125:     <span class="ruby-keyword kw">end</span>
1126:     <span class="ruby-identifier">total_fees</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@fine</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@fine</span>.<span class="ruby-identifier">nil?</span>
1127:     <span class="ruby-identifier">redirect_to</span>  <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;pay_fees_defaulters&quot;</span>, <span class="ruby-identifier">:id=</span><span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:date=</span><span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@date</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:fine</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@fine</span>
1128:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000598" class="method-detail">
        <a name="M000598"></a>

        <div class="method-heading">
          <a href="#M000598" class="method-signature">
          <span class="method-name">update_fees_collection_dates</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000598-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000598-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 821</span>
821:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_fees_collection_dates</span>
822:     
823:     <span class="ruby-ivar">@batch</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
824:     <span class="ruby-ivar">@dates</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">fee_collection_dates</span>
825: 
826:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
827:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;fees_collection_dates&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_collection_dates&quot;</span>
828:     <span class="ruby-keyword kw">end</span>
829:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000613" class="method-detail">
        <a name="M000613"></a>

        <div class="method-heading">
          <a href="#M000613" class="method-signature">
          <span class="method-name">update_fees_collection_dates_defaulters</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000613-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000613-source">
<pre>
      <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 1051</span>
1051:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_fees_collection_dates_defaulters</span>
1052:     <span class="ruby-ivar">@batch</span>  = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:batch_id</span>])
1053:     <span class="ruby-ivar">@dates</span> = <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">fee_collection_dates</span>
1054: 
1055:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
1056:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;fees_collection_dates&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_collection_dates_defaulters&quot;</span>
1057:     <span class="ruby-keyword kw">end</span>
1058:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000602" class="method-detail">
        <a name="M000602"></a>

        <div class="method-heading">
          <a href="#M000602" class="method-signature">
          <span class="method-name">update_fine_ajax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000602-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000602-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 912</span>
912:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_fine_ajax</span>
913:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>
914:       <span class="ruby-ivar">@batch</span>   = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:batch_id</span>])
915:       <span class="ruby-ivar">@dates</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
916:       <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
917:       <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:student</span>]) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:student</span>]
918:       <span class="ruby-ivar">@student</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@batch</span>.<span class="ruby-identifier">students</span>.<span class="ruby-identifier">first</span>
919:       <span class="ruby-ivar">@prev_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">previous_student</span>
920:       <span class="ruby-ivar">@next_student</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">next_student</span>
921:       <span class="ruby-ivar">@fine</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:fee</span>])
922:       <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span> <span class="ruby-ivar">@date</span>
923:       <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
924:       <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
925:       <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
926:       <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">due_date</span>
927: 
928: 
929:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
930:         <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;student&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;student_fees_submission&quot;</span>, <span class="ruby-identifier">:with</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@fine</span>
931: 
932:       <span class="ruby-keyword kw">end</span>
933:     <span class="ruby-keyword kw">end</span>
934:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000553" class="method-detail">
        <a name="M000553"></a>

        <div class="method-heading">
          <a href="#M000553" class="method-signature">
          <span class="method-name">update_liability</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000553-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000553-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_liability</span>
398:     <span class="ruby-ivar">@liability</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
399:     <span class="ruby-ivar">@liability</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:liability</span>])
400:     <span class="ruby-ivar">@liabilities</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
401:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
402:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;liability_list&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;liability_list&quot;</span>
403:     <span class="ruby-keyword kw">end</span>
404:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000549" class="method-detail">
        <a name="M000549"></a>

        <div class="method-heading">
          <a href="#M000549" class="method-signature">
          <span class="method-name">update_monthly_payslip</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000549-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000549-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 312</span>
312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_monthly_payslip</span>
313:     <span class="ruby-ivar">@employee</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:emp_id</span>])
314:     <span class="ruby-ivar">@salary_date</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>]
315:     <span class="ruby-ivar">@approve</span> = <span class="ruby-ivar">@employee</span>.<span class="ruby-identifier">is_paylip_approved</span>(<span class="ruby-ivar">@salary_date</span>)
316:     <span class="ruby-ivar">@currency_type</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_key</span>(<span class="ruby-value str">&quot;CurrencyType&quot;</span>).<span class="ruby-identifier">config_value</span>
317:     
318:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
319:       <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
320:         <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;payslip_view&quot;</span>, <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>
321:       <span class="ruby-keyword kw">end</span>
322:       <span class="ruby-keyword kw">return</span>
323:     <span class="ruby-keyword kw">end</span>
324:     <span class="ruby-ivar">@monthly_payslips</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>],
325:       <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;employee_id =#{params[:emp_id]}&quot;</span>,
326:       <span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;payroll_category_id ASC&quot;</span>)
327: 
328:     <span class="ruby-ivar">@individual_payslip_category</span> = <span class="ruby-constant">IndividualPayslipCategory</span>.<span class="ruby-identifier">find_all_by_salary_date</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:salary_date</span>],
329:       <span class="ruby-identifier">:conditions=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;employee_id =#{params[:emp_id]}&quot;</span>,
330:       <span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;id ASC&quot;</span>)
331:     <span class="ruby-ivar">@individual_category_non_deductionable</span> = <span class="ruby-value">0</span>
332:     <span class="ruby-ivar">@individual_category_deductionable</span> = <span class="ruby-value">0</span>
333:     <span class="ruby-ivar">@individual_payslip_category</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
334:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
335:         <span class="ruby-ivar">@individual_category_non_deductionable</span> = <span class="ruby-ivar">@individual_category_non_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
336:       <span class="ruby-keyword kw">end</span>
337:     <span class="ruby-keyword kw">end</span>
338: 
339:     <span class="ruby-ivar">@individual_payslip_category</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pc</span><span class="ruby-operator">|</span>
340:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
341:         <span class="ruby-ivar">@individual_category_deductionable</span> = <span class="ruby-ivar">@individual_category_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">pc</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
342:       <span class="ruby-keyword kw">end</span>
343:     <span class="ruby-keyword kw">end</span>
344: 
345:     <span class="ruby-ivar">@non_deductionable_amount</span> = <span class="ruby-value">0</span>
346:     <span class="ruby-ivar">@deductionable_amount</span> = <span class="ruby-value">0</span>
347:     <span class="ruby-ivar">@monthly_payslips</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mp</span><span class="ruby-operator">|</span>
348:       <span class="ruby-identifier">category1</span> = <span class="ruby-constant">PayrollCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">mp</span>.<span class="ruby-identifier">payroll_category_id</span>)
349:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">category1</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
350:         <span class="ruby-ivar">@non_deductionable_amount</span> = <span class="ruby-ivar">@non_deductionable_amount</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mp</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
351:       <span class="ruby-keyword kw">end</span>
352:     <span class="ruby-keyword kw">end</span>
353: 
354:     <span class="ruby-ivar">@monthly_payslips</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mp</span><span class="ruby-operator">|</span>
355:       <span class="ruby-identifier">category2</span> = <span class="ruby-constant">PayrollCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">mp</span>.<span class="ruby-identifier">payroll_category_id</span>)
356:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">category2</span>.<span class="ruby-identifier">is_deduction</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
357:         <span class="ruby-ivar">@deductionable_amount</span> = <span class="ruby-ivar">@deductionable_amount</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">mp</span>.<span class="ruby-identifier">amount</span>.<span class="ruby-identifier">to_i</span>
358:       <span class="ruby-keyword kw">end</span>
359:     <span class="ruby-keyword kw">end</span>
360: 
361:     <span class="ruby-ivar">@net_non_deductionable_amount</span> = <span class="ruby-ivar">@individual_category_non_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@non_deductionable_amount</span>
362:     <span class="ruby-ivar">@net_deductionable_amount</span> = <span class="ruby-ivar">@individual_category_deductionable</span> <span class="ruby-operator">+</span> <span class="ruby-ivar">@deductionable_amount</span>
363: 
364:     <span class="ruby-ivar">@net_amount</span> = <span class="ruby-ivar">@net_non_deductionable_amount</span> <span class="ruby-operator">-</span> <span class="ruby-ivar">@net_deductionable_amount</span>
365:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
366:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;payslip_view&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;view_payslip&quot;</span>
367:     <span class="ruby-keyword kw">end</span>
368: 
369:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000534" class="method-detail">
        <a name="M000534"></a>

        <div class="method-heading">
          <a href="#M000534" class="method-signature">
          <span class="method-name">update_monthly_report</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
transaction&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000534-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000534-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_monthly_report</span>
125: 
126:     <span class="ruby-ivar">@hr</span> = <span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">find_by_config_value</span>(<span class="ruby-value str">&quot;HR&quot;</span>)
127:     <span class="ruby-ivar">@start_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:start_date</span>]).<span class="ruby-identifier">to_date</span>
128:     <span class="ruby-ivar">@end_date</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:end_date</span>]).<span class="ruby-identifier">to_date</span>
129:     <span class="ruby-ivar">@transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
130:       <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'created_at desc'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;created_at &gt;= '#{@start_date}' and created_at &lt;= '#{@end_date}'&quot;</span>])
131:     <span class="ruby-ivar">@other_transactions</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">report</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>,<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>])
132:     <span class="ruby-ivar">@transactions_fees</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">total_fees</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
133:     <span class="ruby-identifier">employees</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
134:     <span class="ruby-ivar">@salary</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">total_employees_salary</span>(<span class="ruby-identifier">employees</span>, <span class="ruby-ivar">@start_date</span>, <span class="ruby-ivar">@end_date</span>)
135:     <span class="ruby-ivar">@donations_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">donations_triggers</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
136:     <span class="ruby-ivar">@batchs</span> = <span class="ruby-constant">Batch</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
137:     <span class="ruby-ivar">@grand_total</span> = <span class="ruby-constant">FinanceTransaction</span>.<span class="ruby-identifier">grand_total</span>(<span class="ruby-ivar">@start_date</span>,<span class="ruby-ivar">@end_date</span>)
138:     <span class="ruby-ivar">@graph</span> = <span class="ruby-identifier">open_flash_chart_object</span>(<span class="ruby-value">960</span>, <span class="ruby-value">500</span>, <span class="ruby-node">&quot;graph_for_update_monthly_report?start_date=#{@start_date}&amp;end_date=#{@end_date}&quot;</span>)
139: 
140:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000606" class="method-detail">
        <a name="M000606"></a>

        <div class="method-heading">
          <a href="#M000606" class="method-signature">
          <span class="method-name">update_student_fine_ajax</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000606-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000606-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 963</span>
963:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_student_fine_ajax</span>
964: 
965:     <span class="ruby-ivar">@student</span> = <span class="ruby-constant">Student</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:student</span>])
966:     <span class="ruby-ivar">@fine</span> = (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:fee</span>])
967:     <span class="ruby-ivar">@date</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
968:     <span class="ruby-ivar">@financefee</span> = <span class="ruby-ivar">@student</span>.<span class="ruby-identifier">finance_fee_by_date</span>(<span class="ruby-ivar">@date</span>)
969:     <span class="ruby-ivar">@fee_collection</span> = <span class="ruby-constant">FinanceFeeCollection</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:fine</span>][<span class="ruby-identifier">:date</span>])
970:     <span class="ruby-ivar">@due_date</span> = <span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">due_date</span>
971:     <span class="ruby-ivar">@fee_category</span> = <span class="ruby-constant">FinanceFeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-ivar">@fee_collection</span>.<span class="ruby-identifier">fee_category_id</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;is_deleted IS NOT NULL&quot;</span>])
972:     <span class="ruby-ivar">@fee_particulars</span> = <span class="ruby-ivar">@fee_category</span>.<span class="ruby-identifier">fees</span>(<span class="ruby-ivar">@student</span>)
973: 
974:     <span class="ruby-identifier">render</span> <span class="ruby-identifier">:update</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">page</span><span class="ruby-operator">|</span>
975:       <span class="ruby-identifier">page</span>.<span class="ruby-identifier">replace_html</span> <span class="ruby-value str">&quot;fee_submission&quot;</span>, <span class="ruby-identifier">:partial</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;fees_submission_form&quot;</span>
976:     <span class="ruby-keyword kw">end</span>
977: 
978:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000558" class="method-detail">
        <a name="M000558"></a>

        <div class="method-heading">
          <a href="#M000558" class="method-signature">
          <span class="method-name">view_asset</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000558-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000558-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 428</span>
428:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">view_asset</span>
429:     <span class="ruby-ivar">@assets</span> = <span class="ruby-constant">Asset</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
430:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000554" class="method-detail">
        <a name="M000554"></a>

        <div class="method-heading">
          <a href="#M000554" class="method-signature">
          <span class="method-name">view_liability</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000554-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000554-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 406</span>
406:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">view_liability</span>
407:     <span class="ruby-ivar">@liabilities</span> = <span class="ruby-constant">Liability</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'is_deleted = 0'</span>)
408:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000547" class="method-detail">
        <a name="M000547"></a>

        <div class="method-heading">
          <a href="#M000547" class="method-signature">
          <span class="method-name">view_monthly_payslip</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
view monthly payslip
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;-
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000547-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000547-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 297</span>
297:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">view_monthly_payslip</span>
298:     
299:     <span class="ruby-ivar">@departments</span> = <span class="ruby-constant">EmployeeDepartment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
300:     <span class="ruby-ivar">@categories</span>  = <span class="ruby-constant">EmployeeCategory</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
301:     <span class="ruby-ivar">@positions</span>   = <span class="ruby-constant">EmployeePosition</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
302:     <span class="ruby-ivar">@grades</span>      = <span class="ruby-constant">EmployeeGrade</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
303:     
304:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000548" class="method-detail">
        <a name="M000548"></a>

        <div class="method-heading">
          <a href="#M000548" class="method-signature">
          <span class="method-name">view_monthly_payslip_search</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000548-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000548-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/finance_controller.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">view_monthly_payslip_search</span>
307:     <span class="ruby-ivar">@employee</span> = <span class="ruby-constant">Employee</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
308:     <span class="ruby-ivar">@salary_dates</span> = <span class="ruby-constant">MonthlyPayslip</span>.<span class="ruby-identifier">find_all_by_employee_id</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>], <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;distinct salary_date&quot;</span>)
309: 
310:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>